[
  {
    "objectID": "quarto/unite_buffers.html",
    "href": "quarto/unite_buffers.html",
    "title": "Unite buffers",
    "section": "",
    "text": "This script combines individual transplant center buffers into unified, organ-level catchment areas.\nEarlier steps created buffers (either distance-based or 60-minute travel-time isochrones) around each transplant center.\nHere, those individual polygons are merged into a single combined service area for each organ, distance, and year.",
    "crumbs": [
      "Data Processing",
      "Unite buffers"
    ]
  },
  {
    "objectID": "quarto/unite_buffers.html#why-unite-buffers",
    "href": "quarto/unite_buffers.html#why-unite-buffers",
    "title": "Unite buffers",
    "section": "Why “Unite” Buffers?",
    "text": "Why “Unite” Buffers?\nWhen buffers are created around multiple centers, they often:\n\nOverlap geographically\n\nCover adjacent regions\n\nShare common areas\n\nIf we simply summed tract populations within each individual buffer, overlapping areas would be double-counted.\nTo prevent this, we:\n\nCombine (union) all individual center buffers\nCreate a single, continuous polygon representing the total catchment area\nEnsure that each geographic area is counted only once",
    "crumbs": [
      "Data Processing",
      "Unite buffers"
    ]
  },
  {
    "objectID": "quarto/unite_buffers.html#objects-created",
    "href": "quarto/unite_buffers.html#objects-created",
    "title": "Unite buffers",
    "section": "Objects Created",
    "text": "Objects Created\nFour parallel objects are constructed:\n\nTransplant_center_all_buffer_united\nTransplant_centers_active_buffer_united\nTransplant_centers_HIV_buffer_united\nTransplant_centers_HOPE_buffer_united\n\nEach object is indexed by:\n\nOrgan\n\nDistance\n\nYear (when applicable)",
    "crumbs": [
      "Data Processing",
      "Unite buffers"
    ]
  },
  {
    "objectID": "quarto/unite_buffers.html#how-the-union-works",
    "href": "quarto/unite_buffers.html#how-the-union-works",
    "title": "Unite buffers",
    "section": "How the Union Works",
    "text": "How the Union Works\nFor each:\n\nOrgan\nDistance\n(And year, when relevant)\n\nThe script:\n\nTakes the set of individual buffer polygons\nApplies st_union(geometry)\n\nCollapses them into one merged geometry\nConverts the result back into an sf object\n\nThe resulting dataset contains a single row labeled:\ncatchment_area = “All Centers”\nThis label clarifies that the polygon represents the combined service area of all centers in that category.",
    "crumbs": [
      "Data Processing",
      "Unite buffers"
    ]
  },
  {
    "objectID": "quarto/unite_buffers.html#structure-of-the-result",
    "href": "quarto/unite_buffers.html#structure-of-the-result",
    "title": "Unite buffers",
    "section": "Structure of the Result",
    "text": "Structure of the Result\nAfter processing, the structure is:\n\nTransplant_center_all_buffer_united[[organ]][[distance]]\nTransplant_centers_active_buffer_united[[organ]][[distance]][[year]]\nTransplant_centers_HIV_buffer_united[[organ]][[distance]][[year]]\nTransplant_centers_HOPE_buffer_united[[organ]][[distance]][[year]]\n\nEach object is a single merged polygon representing the total geographic coverage of that center group.",
    "crumbs": [
      "Data Processing",
      "Unite buffers"
    ]
  },
  {
    "objectID": "quarto/unite_buffers.html#why-this-step-matters",
    "href": "quarto/unite_buffers.html#why-this-step-matters",
    "title": "Unite buffers",
    "section": "Why This Step Matters",
    "text": "Why This Step Matters\nUniting buffers allows accurate calculation of:\n\nTotal population within service areas\nTotal number of people living with HIV within reach\nChanges in geographic access between years\nComparisons across center categories (Active vs HIV vs HOPE)\n\nWithout uniting overlapping buffers, population totals would be inflated and geographic access overstated.\n\n\n\nClick to show/hide R Code\n#Unite for total calculations\n\nTransplant_center_all_buffer_united&lt;-list()\nTransplant_centers_active_buffer_united&lt;-list()\nTransplant_centers_HIV_buffer_united&lt;-list()\nTransplant_centers_HOPE_buffer_united&lt;-list()\n\nfor (organ_loop in organ_list){\n  for (distance_loop in distance_list){\n    \n    Transplant_center_all_buffer_united[[organ_loop]][[distance_loop]]&lt;-\n      Transplant_center_all_buffer[[organ_loop]][[distance_loop]]%&gt;%\n      reframe(\n        catchment_area = \"All Centers\", \n        geometry = st_union(geometry)\n      )%&gt;%\n      st_as_sf()\n    \n    \n    for (year_loop in year_list){\n      \n      \n      Transplant_centers_active_buffer_united[[organ_loop]][[distance_loop]][[year_loop]]&lt;-\n        Transplant_centers_active_buffer[[organ_loop]][[distance_loop]][[year_loop]]%&gt;%\n        reframe(\n          catchment_area = \"All Centers\", \n          geometry = st_union(geometry)\n        )%&gt;%\n        st_as_sf()\n      \n      Transplant_centers_HIV_buffer_united[[organ_loop]][[distance_loop]][[year_loop]]&lt;-\n        Transplant_centers_HIV_buffer[[organ_loop]][[distance_loop]][[year_loop]]%&gt;%\n        reframe(\n          catchment_area = \"All Centers\", \n          geometry = st_union(geometry)\n        )%&gt;%\n        st_as_sf()\n      \n      \n      \n      \n      Transplant_centers_HOPE_buffer_united[[organ_loop]][[distance_loop]][[year_loop]]&lt;-\n        Transplant_centers_HOPE_buffer[[organ_loop]][[distance_loop]][[year_loop]]%&gt;%\n        reframe(\n          catchment_area = \"All Centers\", \n          geometry = st_union(geometry)\n        )%&gt;%\n        st_as_sf()\n      \n      \n      \n      \n    }\n    \n  }\n}",
    "crumbs": [
      "Data Processing",
      "Unite buffers"
    ]
  },
  {
    "objectID": "quarto/unite_buffers.html#other-portions-of-the-analysis",
    "href": "quarto/unite_buffers.html#other-portions-of-the-analysis",
    "title": "Unite buffers",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Unite buffers"
    ]
  },
  {
    "objectID": "quarto/set_isochrones.html",
    "href": "quarto/set_isochrones.html",
    "title": "Set isochrones",
    "section": "",
    "text": "The code in this script creates 60-minute driving catchment areas around transplant centers.\nThese catchment areas are later used to estimate how many people living with HIV reside within a realistic travel time of transplant programs.",
    "crumbs": [
      "Data Processing",
      "Set isochrones"
    ]
  },
  {
    "objectID": "quarto/set_isochrones.html#creating-60-minute-driving-catchment-areas",
    "href": "quarto/set_isochrones.html#creating-60-minute-driving-catchment-areas",
    "title": "Set isochrones",
    "section": "Creating 60-Minute Driving Catchment Areas",
    "text": "Creating 60-Minute Driving Catchment Areas\nThis section generates travel-time–based service areas for transplant centers.\nUnlike simple radius buffers (e.g., 50 miles in every direction), these service areas reflect actual road travel time, accounting for highways, traffic patterns, and geography.\n\nWhat is an Isochrone?\nAn isochrone is a geographic area showing how far someone can travel within a specified amount of time.\nIn this analysis:\n\nA 60-minute isochrone represents all locations that can be reached within 60 minutes of driving from a transplant center.\nThis provides a more realistic measure of geographic access than straight-line (circular) buffers.\n\nIsochrones are generated using the mapboxapi R package, which interfaces with the Mapbox routing API:\n\nhttps://walker-data.com/mapboxapi/\nCRAN: https://cran.r-project.org/package=mapboxapi",
    "crumbs": [
      "Data Processing",
      "Set isochrones"
    ]
  },
  {
    "objectID": "quarto/set_isochrones.html#standardizing-time-why-700-am",
    "href": "quarto/set_isochrones.html#standardizing-time-why-700-am",
    "title": "Set isochrones",
    "section": "Standardizing Time: Why 7:00 AM?",
    "text": "Standardizing Time: Why 7:00 AM?\nTravel time varies depending on traffic conditions.\nTo ensure consistency:\n\nIsochrones are calculated assuming departure at 7:00 AM local time.\nThis approximates peak commuting conditions.\nUsing a fixed time improves comparability across regions.\n\nBecause Mapbox requires time in UTC, the script:\n\nCreates a 7:00 AM timestamp for each U.S. time zone\nConverts that time to UTC using with_tz()\nStores these converted times in converted_times\n\nThis ensures that each transplant center’s isochrone is calculated at the correct local time.",
    "crumbs": [
      "Data Processing",
      "Set isochrones"
    ]
  },
  {
    "objectID": "quarto/set_isochrones.html#caching-isochrone-results",
    "href": "quarto/set_isochrones.html#caching-isochrone-results",
    "title": "Set isochrones",
    "section": "Caching Isochrone Results",
    "text": "Caching Isochrone Results\nGenerating isochrones requires external API calls and can be computationally expensive.\nTo avoid recomputing them repeatedly:\n\nThe script checks whether a cached .RDS file already exists.\nIf it exists → it loads the file.\nIf not → it generates the isochrone and saves it to the cache/ directory.\n\nThis dramatically speeds up Quarto re-rendering and ensures reproducibility.",
    "crumbs": [
      "Data Processing",
      "Set isochrones"
    ]
  },
  {
    "objectID": "quarto/set_isochrones.html#isochrones-created",
    "href": "quarto/set_isochrones.html#isochrones-created",
    "title": "Set isochrones",
    "section": "Isochrones Created",
    "text": "Isochrones Created\nFor each:\n\nOrgan type\n\nYear\n\nCenter category\n\nThe script creates 60-minute isochrones for:\n\nAll transplant centers\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE (HIV D+/R+) transplant centers\n\nThe resulting structure is:\n\nTransplant_center_all_buffer[[organ]][[\"60min\"]]\nTransplant_centers_active_buffer[[organ]][[\"60min\"]][[year]]\nTransplant_centers_HIV_buffer[[organ]][[\"60min\"]][[year]]\nTransplant_centers_HOPE_buffer[[organ]][[\"60min\"]][[year]]\n\nEach object is an sf polygon representing the area reachable within 60 minutes of driving from the center.",
    "crumbs": [
      "Data Processing",
      "Set isochrones"
    ]
  },
  {
    "objectID": "quarto/set_isochrones.html#why-travel-time-instead-of-miles",
    "href": "quarto/set_isochrones.html#why-travel-time-instead-of-miles",
    "title": "Set isochrones",
    "section": "Why Travel Time Instead of Miles?",
    "text": "Why Travel Time Instead of Miles?\nStraight-line distance (e.g., 50 miles) does not account for:\n\nRoad networks\n\nTraffic congestion\n\nGeographic barriers (mountains, water)\n\nTravel-time–based service areas better approximate real-world access to transplant care.\nThese 60-minute isochrones are later intersected with census tract–level HIV population data to quantify access to transplant services.\n\n\n\nClick to show/hide R Code\n#set isochrones\n\n\n#Convert 7 AM local time to UTC time for every time zone in the US, using the with_tz function\n\nconverted_times&lt;-list()\n\nfor (year_loop in year_list){\n  \n  \n  #Create list for each year that converts the time zones\n  converted_times[[year_loop]] &lt;- tibble(\n    timezone = timezones\n  ) %&gt;%\n    mutate(\n      local_time = map2(\n        reference_date[[year_loop]], timezone,\n        ~ ymd_hms(paste(.x, \"07:00:00\"), tz = .y)\n      ),\n      utc_time = map(local_time, ~ with_tz(.x, \"UTC\"))\n    ) %&gt;%\n    unnest(c(local_time, utc_time))\n}\n  \n  #Create isochrone objects for transplant centersusing the mapboxapi package if results not already cached\n  for (organ_loop in organ_list){\n\n    \n    all_center_path&lt;-paste0(\"cache/Transplant_center_all_60min_buffer_\",organ_loop, \".RDS\")\n    if (file.exists(all_center_path)) {\n      Transplant_center_all_buffer[[organ_loop]][[\"60min\"]] &lt;- \n        readRDS(all_center_path)\n    }else {\n      \n      Transplant_center_all_buffer[[organ_loop]][[\"60min\"]]&lt;-\n        set_60_min_isochrone_at_7AM(Transplant_centers_all_sf[[organ_loop]], \"2017\")\n      saveRDS(Transplant_center_all_buffer[[organ_loop]][[\"60min\"]],\n              all_center_path)\n    } \n    \n    for (year_loop in year_list){\n    \n       \n    \n    active_center_path&lt;-paste0(\"cache/Transplant_centers_active_60min_buffer_\",organ_loop, \"_\", year_loop,\".RDS\")\n    if (file.exists(active_center_path)) {\n      Transplant_centers_active_buffer[[organ_loop]][[\"60min\"]][[year_loop]] &lt;- \n        readRDS(active_center_path)\n    }else {\n      \n    Transplant_centers_active_buffer[[organ_loop]][[\"60min\"]][[year_loop]]&lt;-\n      set_60_min_isochrone_at_7AM(Transplant_centers_active_SF[[organ_loop]][[year_loop]], year_loop)\n    saveRDS(Transplant_centers_active_buffer[[organ_loop]][[\"60min\"]][[year_loop]],\n            active_center_path)\n    }\n    \n    HIV_center_path&lt;-paste0(\"cache/Transplant_centers_HIV_60min_buffer_\",organ_loop, \"_\", year_loop,\".RDS\")\n    if (file.exists(HIV_center_path)) {\n      Transplant_centers_HIV_buffer[[organ_loop]][[\"60min\"]][[year_loop]]&lt;-\n        readRDS(HIV_center_path)\n    } else {\n      Transplant_centers_HIV_buffer[[organ_loop]][[\"60min\"]][[year_loop]]&lt;-\n        set_60_min_isochrone_at_7AM(Transplant_centers_HIV_sf[[organ_loop]][[year_loop]], year_loop)\n      saveRDS(Transplant_centers_HIV_buffer[[organ_loop]][[\"60min\"]][[year_loop]],\n              HIV_center_path)\n    }\n      \n\n    HOPE_center_path&lt;-paste0(\"cache/Transplant_centers_HOPE_60min_buffer_\",organ_loop, \"_\", year_loop,\".RDS\")\n    if (file.exists(HOPE_center_path)) {\n      Transplant_centers_HOPE_buffer[[organ_loop]][[\"60min\"]][[year_loop]]&lt;-\n        readRDS(HOPE_center_path)\n    } else {\n      Transplant_centers_HOPE_buffer[[organ_loop]][[\"60min\"]][[year_loop]]&lt;-\n        set_60_min_isochrone_at_7AM(Transplant_centers_HOPE_sf[[organ_loop]][[year_loop]], year_loop)\n      saveRDS(Transplant_centers_HOPE_buffer[[organ_loop]][[\"60min\"]][[year_loop]],\n              HOPE_center_path)\n    }\n  }\n}",
    "crumbs": [
      "Data Processing",
      "Set isochrones"
    ]
  },
  {
    "objectID": "quarto/set_isochrones.html#other-portions-of-the-analysis",
    "href": "quarto/set_isochrones.html#other-portions-of-the-analysis",
    "title": "Set isochrones",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Set isochrones"
    ]
  },
  {
    "objectID": "quarto/results_pancreas.html",
    "href": "quarto/results_pancreas.html",
    "title": "Results: pancreas",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive pancreas center 50 mile radius\n777,223\n943,972\n82.3\n835,583\n1,062,528\n78.6\n\n\nActive HIV R+ pancreas center 50 mile radius\n368,015\n943,972\n39.0\n546,507\n1,062,528\n51.4\n\n\nActive HOPE D+ pancreas center 50 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive pancreas center 60 min radius\n754,966\n943,972\n80.0\n807,367\n1,062,528\n76.0\n\n\nActive HIV R+ pancreas center 60 min radius\n348,387\n943,972\n36.9\n505,365\n1,062,528\n47.6\n\n\nActive HOPE D+ pancreas center 60 min radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive pancreas center 100 mile radius\n881,317\n943,972\n93.4\n978,424\n1,062,528\n92.1\n\n\nActive HIV R+ pancreas center 100 mile radius\n445,782\n943,972\n47.2\n713,719\n1,062,528\n67.2\n\n\nActive HOPE D+ pancreas center 100 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive pancreas center 200 mile radius\n934,488\n943,972\n99.0\n1,048,747\n1,062,528\n98.7\n\n\nActive HIV R+ pancreas center 200 mile radius\n625,129\n943,972\n66.2\n877,139\n1,062,528\n82.6\n\n\nActive HOPE D+ pancreas center 200 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive pancreas center 50 mile radius\n216,948,011\n317,900,212\n68.2\n215,180,913\n327,849,655\n65.6\n\n\nActive pancreas center 60 min radius\n202,894,112\n317,900,212\n63.8\n200,273,054\n327,849,655\n61.1\n\n\nActive pancreas center 100 mile radius\n276,778,338\n317,900,212\n87.1\n280,960,340\n327,849,655\n85.7\n\n\nActive pancreas center 200 mile radius\n309,512,463\n317,900,212\n97.4\n317,301,412\n327,849,655\n96.8",
    "crumbs": [
      "Results, separated by organ",
      "Pancreas"
    ]
  },
  {
    "objectID": "quarto/results_pancreas.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "href": "quarto/results_pancreas.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "title": "Results: pancreas",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive pancreas center 50 mile radius\n777,223\n943,972\n82.3\n835,583\n1,062,528\n78.6\n\n\nActive HIV R+ pancreas center 50 mile radius\n368,015\n943,972\n39.0\n546,507\n1,062,528\n51.4\n\n\nActive HOPE D+ pancreas center 50 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive pancreas center 60 min radius\n754,966\n943,972\n80.0\n807,367\n1,062,528\n76.0\n\n\nActive HIV R+ pancreas center 60 min radius\n348,387\n943,972\n36.9\n505,365\n1,062,528\n47.6\n\n\nActive HOPE D+ pancreas center 60 min radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive pancreas center 100 mile radius\n881,317\n943,972\n93.4\n978,424\n1,062,528\n92.1\n\n\nActive HIV R+ pancreas center 100 mile radius\n445,782\n943,972\n47.2\n713,719\n1,062,528\n67.2\n\n\nActive HOPE D+ pancreas center 100 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive pancreas center 200 mile radius\n934,488\n943,972\n99.0\n1,048,747\n1,062,528\n98.7\n\n\nActive HIV R+ pancreas center 200 mile radius\n625,129\n943,972\n66.2\n877,139\n1,062,528\n82.6\n\n\nActive HOPE D+ pancreas center 200 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive pancreas center 50 mile radius\n216,948,011\n317,900,212\n68.2\n215,180,913\n327,849,655\n65.6\n\n\nActive pancreas center 60 min radius\n202,894,112\n317,900,212\n63.8\n200,273,054\n327,849,655\n61.1\n\n\nActive pancreas center 100 mile radius\n276,778,338\n317,900,212\n87.1\n280,960,340\n327,849,655\n85.7\n\n\nActive pancreas center 200 mile radius\n309,512,463\n317,900,212\n97.4\n317,301,412\n327,849,655\n96.8",
    "crumbs": [
      "Results, separated by organ",
      "Pancreas"
    ]
  },
  {
    "objectID": "quarto/results_pancreas.html#figures",
    "href": "quarto/results_pancreas.html#figures",
    "title": "Results: pancreas",
    "section": "Figures",
    "text": "Figures\nFigures are grouped into three sections.\n\n\nCompare PLWH and non-HIV\nThese figures compare geographic access between PLWH and individuals without HIV within each catchment definition.\nEach panel corresponds to a distance-based definition:\n\n50 miles\n\n60 minutes\n\n100 miles\n\n200 miles\n\nThese figures highlight disparities in access by HIV status.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCompare PLWH Between Years\nThese figures evaluate changes in geographic access among PLWH between 2017 and 2022.\nFor each catchment definition, results are shown for:\n\nActive centers\n\nHIV R+ centers\n\nHOPE Act D+ centers\n\nThis section highlights temporal changes in transplant center availability.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBeeswarm Plots\nBeeswarm plots display the distribution of catchment-level population proportions across centers.\nEach point represents a transplant center, with the distribution shown for each distance definition.\nThese plots illustrate variability in geographic access across centers rather than only aggregate proportions.",
    "crumbs": [
      "Results, separated by organ",
      "Pancreas"
    ]
  },
  {
    "objectID": "quarto/results_liver.html",
    "href": "quarto/results_liver.html",
    "title": "Results: liver",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive liver center 50 mile radius\n753,779\n943,972\n79.9\n839,669\n1,062,528\n79.0\n\n\nActive HIV R+ liver center 50 mile radius\n640,072\n943,972\n67.8\n767,743\n1,062,528\n72.3\n\n\nActive HOPE D+ liver center 50 mile radius\n227,346\n943,972\n24.1\n437,948\n1,062,528\n41.2\n\n\nActive liver center 60 min radius\n730,621\n943,972\n77.4\n811,577\n1,062,528\n76.4\n\n\nActive HIV R+ liver center 60 min radius\n612,855\n943,972\n64.9\n741,703\n1,062,528\n69.8\n\n\nActive HOPE D+ liver center 60 min radius\n190,700\n943,972\n20.2\n394,825\n1,062,528\n37.2\n\n\nActive liver center 100 mile radius\n872,245\n943,972\n92.4\n975,943\n1,062,528\n91.9\n\n\nActive HIV R+ liver center 100 mile radius\n767,439\n943,972\n81.3\n903,126\n1,062,528\n85.0\n\n\nActive HOPE D+ liver center 100 mile radius\n286,819\n943,972\n30.4\n569,871\n1,062,528\n53.6\n\n\nActive liver center 200 mile radius\n930,008\n943,972\n98.5\n1,045,003\n1,062,528\n98.4\n\n\nActive HIV R+ liver center 200 mile radius\n909,524\n943,972\n96.4\n1,033,811\n1,062,528\n97.3\n\n\nActive HOPE D+ liver center 200 mile radius\n358,372\n943,972\n38.0\n767,768\n1,062,528\n72.3\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive liver center 50 mile radius\n208,324,306\n317,900,212\n65.5\n215,145,197\n327,849,655\n65.6\n\n\nActive liver center 60 min radius\n194,504,123\n317,900,212\n61.2\n200,486,950\n327,849,655\n61.2\n\n\nActive liver center 100 mile radius\n270,235,940\n317,900,212\n85.0\n278,572,598\n327,849,655\n85.0\n\n\nActive liver center 200 mile radius\n306,075,955\n317,900,212\n96.3\n315,457,545\n327,849,655\n96.2",
    "crumbs": [
      "Results, separated by organ",
      "Liver"
    ]
  },
  {
    "objectID": "quarto/results_liver.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "href": "quarto/results_liver.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "title": "Results: liver",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive liver center 50 mile radius\n753,779\n943,972\n79.9\n839,669\n1,062,528\n79.0\n\n\nActive HIV R+ liver center 50 mile radius\n640,072\n943,972\n67.8\n767,743\n1,062,528\n72.3\n\n\nActive HOPE D+ liver center 50 mile radius\n227,346\n943,972\n24.1\n437,948\n1,062,528\n41.2\n\n\nActive liver center 60 min radius\n730,621\n943,972\n77.4\n811,577\n1,062,528\n76.4\n\n\nActive HIV R+ liver center 60 min radius\n612,855\n943,972\n64.9\n741,703\n1,062,528\n69.8\n\n\nActive HOPE D+ liver center 60 min radius\n190,700\n943,972\n20.2\n394,825\n1,062,528\n37.2\n\n\nActive liver center 100 mile radius\n872,245\n943,972\n92.4\n975,943\n1,062,528\n91.9\n\n\nActive HIV R+ liver center 100 mile radius\n767,439\n943,972\n81.3\n903,126\n1,062,528\n85.0\n\n\nActive HOPE D+ liver center 100 mile radius\n286,819\n943,972\n30.4\n569,871\n1,062,528\n53.6\n\n\nActive liver center 200 mile radius\n930,008\n943,972\n98.5\n1,045,003\n1,062,528\n98.4\n\n\nActive HIV R+ liver center 200 mile radius\n909,524\n943,972\n96.4\n1,033,811\n1,062,528\n97.3\n\n\nActive HOPE D+ liver center 200 mile radius\n358,372\n943,972\n38.0\n767,768\n1,062,528\n72.3\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive liver center 50 mile radius\n208,324,306\n317,900,212\n65.5\n215,145,197\n327,849,655\n65.6\n\n\nActive liver center 60 min radius\n194,504,123\n317,900,212\n61.2\n200,486,950\n327,849,655\n61.2\n\n\nActive liver center 100 mile radius\n270,235,940\n317,900,212\n85.0\n278,572,598\n327,849,655\n85.0\n\n\nActive liver center 200 mile radius\n306,075,955\n317,900,212\n96.3\n315,457,545\n327,849,655\n96.2",
    "crumbs": [
      "Results, separated by organ",
      "Liver"
    ]
  },
  {
    "objectID": "quarto/results_liver.html#figures",
    "href": "quarto/results_liver.html#figures",
    "title": "Results: liver",
    "section": "Figures",
    "text": "Figures\nFigures are grouped into three sections.\n\n\nCompare PLWH and non-HIV\nThese figures compare geographic access between PLWH and individuals without HIV within each catchment definition.\nEach panel corresponds to a distance-based definition:\n\n50 miles\n\n60 minutes\n\n100 miles\n\n200 miles\n\nThese figures highlight disparities in access by HIV status.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCompare PLWH Between Years\nThese figures evaluate changes in geographic access among PLWH between 2017 and 2022.\nFor each catchment definition, results are shown for:\n\nActive centers\n\nHIV R+ centers\n\nHOPE Act D+ centers\n\nThis section highlights temporal changes in transplant center availability.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBeeswarm Plots\nBeeswarm plots display the distribution of catchment-level population proportions across centers.\nEach point represents a transplant center, with the distribution shown for each distance definition.\nThese plots illustrate variability in geographic access across centers rather than only aggregate proportions.",
    "crumbs": [
      "Results, separated by organ",
      "Liver"
    ]
  },
  {
    "objectID": "quarto/results_heart.html",
    "href": "quarto/results_heart.html",
    "title": "Results: heart",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive heart center 50 mile radius\n775,427\n943,972\n82.1\n860,746\n1,062,528\n81.0\n\n\nActive HIV R+ heart center 50 mile radius\n490,212\n943,972\n51.9\n711,406\n1,062,528\n67.0\n\n\nActive HOPE D+ heart center 50 mile radius\n8,906\n943,972\n0.9\n137,154\n1,062,528\n12.9\n\n\nActive heart center 60 min radius\n748,320\n943,972\n79.3\n834,332\n1,062,528\n78.5\n\n\nActive HIV R+ heart center 60 min radius\n452,075\n943,972\n47.9\n684,798\n1,062,528\n64.4\n\n\nActive HOPE D+ heart center 60 min radius\n9,108\n943,972\n1.0\n121,003\n1,062,528\n11.4\n\n\nActive heart center 100 mile radius\n871,683\n943,972\n92.3\n969,439\n1,062,528\n91.2\n\n\nActive HIV R+ heart center 100 mile radius\n588,253\n943,972\n62.3\n863,118\n1,062,528\n81.2\n\n\nActive HOPE D+ heart center 100 mile radius\n18,903\n943,972\n2.0\n174,929\n1,062,528\n16.5\n\n\nActive heart center 200 mile radius\n931,051\n943,972\n98.6\n1,046,247\n1,062,528\n98.5\n\n\nActive HIV R+ heart center 200 mile radius\n767,068\n943,972\n81.3\n984,053\n1,062,528\n92.6\n\n\nActive HOPE D+ heart center 200 mile radius\n52,254\n943,972\n5.5\n236,705\n1,062,528\n22.3\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive heart center 50 mile radius\n217,715,226\n317,900,212\n68.5\n224,578,052\n327,849,655\n68.5\n\n\nActive heart center 60 min radius\n202,663,950\n317,900,212\n63.8\n210,637,885\n327,849,655\n64.2\n\n\nActive heart center 100 mile radius\n271,383,147\n317,900,212\n85.4\n278,469,093\n327,849,655\n84.9\n\n\nActive heart center 200 mile radius\n307,364,544\n317,900,212\n96.7\n316,862,223\n327,849,655\n96.6",
    "crumbs": [
      "Results, separated by organ",
      "Heart"
    ]
  },
  {
    "objectID": "quarto/results_heart.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "href": "quarto/results_heart.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "title": "Results: heart",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive heart center 50 mile radius\n775,427\n943,972\n82.1\n860,746\n1,062,528\n81.0\n\n\nActive HIV R+ heart center 50 mile radius\n490,212\n943,972\n51.9\n711,406\n1,062,528\n67.0\n\n\nActive HOPE D+ heart center 50 mile radius\n8,906\n943,972\n0.9\n137,154\n1,062,528\n12.9\n\n\nActive heart center 60 min radius\n748,320\n943,972\n79.3\n834,332\n1,062,528\n78.5\n\n\nActive HIV R+ heart center 60 min radius\n452,075\n943,972\n47.9\n684,798\n1,062,528\n64.4\n\n\nActive HOPE D+ heart center 60 min radius\n9,108\n943,972\n1.0\n121,003\n1,062,528\n11.4\n\n\nActive heart center 100 mile radius\n871,683\n943,972\n92.3\n969,439\n1,062,528\n91.2\n\n\nActive HIV R+ heart center 100 mile radius\n588,253\n943,972\n62.3\n863,118\n1,062,528\n81.2\n\n\nActive HOPE D+ heart center 100 mile radius\n18,903\n943,972\n2.0\n174,929\n1,062,528\n16.5\n\n\nActive heart center 200 mile radius\n931,051\n943,972\n98.6\n1,046,247\n1,062,528\n98.5\n\n\nActive HIV R+ heart center 200 mile radius\n767,068\n943,972\n81.3\n984,053\n1,062,528\n92.6\n\n\nActive HOPE D+ heart center 200 mile radius\n52,254\n943,972\n5.5\n236,705\n1,062,528\n22.3\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive heart center 50 mile radius\n217,715,226\n317,900,212\n68.5\n224,578,052\n327,849,655\n68.5\n\n\nActive heart center 60 min radius\n202,663,950\n317,900,212\n63.8\n210,637,885\n327,849,655\n64.2\n\n\nActive heart center 100 mile radius\n271,383,147\n317,900,212\n85.4\n278,469,093\n327,849,655\n84.9\n\n\nActive heart center 200 mile radius\n307,364,544\n317,900,212\n96.7\n316,862,223\n327,849,655\n96.6",
    "crumbs": [
      "Results, separated by organ",
      "Heart"
    ]
  },
  {
    "objectID": "quarto/results_heart.html#figures",
    "href": "quarto/results_heart.html#figures",
    "title": "Results: heart",
    "section": "Figures",
    "text": "Figures\nFigures are grouped into three sections.\n\n\nCompare PLWH and non-HIV\nThese figures compare geographic access between PLWH and individuals without HIV within each catchment definition.\nEach panel corresponds to a distance-based definition:\n\n50 miles\n\n60 minutes\n\n100 miles\n\n200 miles\n\nThese figures highlight disparities in access by HIV status.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCompare PLWH Between Years\nThese figures evaluate changes in geographic access among PLWH between 2017 and 2022.\nFor each catchment definition, results are shown for:\n\nActive centers\n\nHIV R+ centers\n\nHOPE Act D+ centers\n\nThis section highlights temporal changes in transplant center availability.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBeeswarm Plots\nBeeswarm plots display the distribution of catchment-level population proportions across centers.\nEach point represents a transplant center, with the distribution shown for each distance definition.\nThese plots illustrate variability in geographic access across centers rather than only aggregate proportions.",
    "crumbs": [
      "Results, separated by organ",
      "Heart"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html",
    "href": "quarto/join_tracts_to_united_buffers.html",
    "title": "Join tracts to united buffers",
    "section": "",
    "text": "This section performs spatial joins between census tracts and the united (merged) transplant center buffers.\nUnlike the earlier version—where tracts were joined to individual center buffers—this approach joins tracts to a single merged catchment polygon for each organ, distance, and year.\nThis prevents duplication and ensures accurate population totals.\n\n\n\n\n\n\nSource code\n\n\n\nThe full R script is available at:\n\nR/join_tracts_to_united_buffers.R\n\nThis R script file is itself reliant on the following helper files:\n\nR/setup.R\nR/functions.R",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html#linking-census-tracts-to-united-catchment-areas",
    "href": "quarto/join_tracts_to_united_buffers.html#linking-census-tracts-to-united-catchment-areas",
    "title": "Join tracts to united buffers",
    "section": "",
    "text": "This section performs spatial joins between census tracts and the united (merged) transplant center buffers.\nUnlike the earlier version—where tracts were joined to individual center buffers—this approach joins tracts to a single merged catchment polygon for each organ, distance, and year.\nThis prevents duplication and ensures accurate population totals.\n\n\n\n\n\n\nSource code\n\n\n\nThe full R script is available at:\n\nR/join_tracts_to_united_buffers.R\n\nThis R script file is itself reliant on the following helper files:\n\nR/setup.R\nR/functions.R",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html#why-use-united-buffers",
    "href": "quarto/join_tracts_to_united_buffers.html#why-use-united-buffers",
    "title": "Join tracts to united buffers",
    "section": "Why Use United Buffers?",
    "text": "Why Use United Buffers?\nWhen joining tracts to individual center buffers:\n\nA tract can intersect multiple centers\nThat tract would appear multiple times\nPopulation totals would be inflated unless deduplicated later\n\nBy first uniting buffers using st_union() and then joining:\n\nEach tract appears at most once\nPopulation counts reflect total geographic coverage\nOverlapping service areas are handled correctly\n\nThis is essential for valid total-access calculations.",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html#objects-created",
    "href": "quarto/join_tracts_to_united_buffers.html#objects-created",
    "title": "Join tracts to united buffers",
    "section": "Objects Created",
    "text": "Objects Created\nThree nested list objects are generated:\n\ntracts_in_buffers_active_united\ntracts_in_buffers_HIV_united\ntracts_in_buffers_HOPE_united\n\nEach object is indexed by:\n\nOrgan\n\nDistance\n\nYear",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html#what-the-spatial-join-does",
    "href": "quarto/join_tracts_to_united_buffers.html#what-the-spatial-join-does",
    "title": "Join tracts to united buffers",
    "section": "What the Spatial Join Does",
    "text": "What the Spatial Join Does\nFor each:\n\nOrgan\n\nDistance\n\nYear\n\nThe script performs:\nst_join(..., join = st_intersects)\nThis means:\n\nA census tract is included if it intersects the combined catchment area of that transplant center group.\n\nBecause the buffer has already been united:\n\nEach tract can match only once per category\nNo duplication occurs due to overlapping center service areas",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html#resulting-structure",
    "href": "quarto/join_tracts_to_united_buffers.html#resulting-structure",
    "title": "Join tracts to united buffers",
    "section": "Resulting Structure",
    "text": "Resulting Structure\nAfter the loops complete:\n\ntracts_in_buffers_active_united[[organ]][[distance]][[year]]\ntracts_in_buffers_HIV_united[[organ]][[distance]][[year]]\ntracts_in_buffers_HOPE_united[[organ]][[distance]][[year]]\n\nEach object contains tract-level population and HIV case estimates for tracts located within the total geographic service area of that center category.",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html#why-this-step-matters",
    "href": "quarto/join_tracts_to_united_buffers.html#why-this-step-matters",
    "title": "Join tracts to united buffers",
    "section": "Why This Step Matters",
    "text": "Why This Step Matters\nThis unified join enables accurate calculation of:\n\nTotal population within reach of transplant services\n\nTotal number of people living with HIV within those catchment areas\n\nChanges in geographic access across years\n\nComparisons between Active, HIV R+, and HOPE centers\n\nBy eliminating overlap-driven duplication, this approach ensures that access estimates reflect true geographic coverage, not inflated counts.\n\n\n\nClick to show/hide R Code\n#Join tracts to united buffers\n\n\ntracts_in_buffers_active_united&lt;-list()\ntracts_in_buffers_HIV_united&lt;-list()\ntracts_in_buffers_HOPE_united&lt;-list()\n\nfor (organ_loop in organ_list){\n  for (distance_loop in distance_list){\n    for (year_loop in year_list){\n      \n      message(paste(\"Currently on:\", organ_loop, \"\", distance_loop, \"for year:\", year_loop))\n      message(\"Calculating tracts for active...\")\n      \n      #ST join to individual tracts and the united transplant center geography to avoid duplication\n      tracts_in_buffers_active_united[[organ_loop]][[distance_loop]][[year_loop]] &lt;- \n        st_join(Merged_tracts[[year_loop]], \n                Transplant_centers_active_buffer_united[[organ_loop]][[distance_loop]][[year_loop]], \n                join = st_intersects)\n      \n      message(\"Calculating tracts for HIV...\")\n      tracts_in_buffers_HIV_united[[organ_loop]][[distance_loop]][[year_loop]] &lt;- \n        st_join(Merged_tracts[[year_loop]], \n                Transplant_centers_HIV_buffer_united[[organ_loop]][[distance_loop]][[year_loop]], \n                join = st_intersects)\n      \n      message(\"Calculating tracts for HOPE...\")\n      tracts_in_buffers_HOPE_united[[organ_loop]][[distance_loop]][[year_loop]] &lt;- \n        st_join(Merged_tracts[[year_loop]], \n                Transplant_centers_HOPE_buffer_united[[organ_loop]][[distance_loop]][[year_loop]], \n                join = st_intersects)\n    }}}",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_united_buffers.html#other-portions-of-the-analysis",
    "href": "quarto/join_tracts_to_united_buffers.html#other-portions-of-the-analysis",
    "title": "Join tracts to united buffers",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Join tracts to united buffers"
    ]
  },
  {
    "objectID": "quarto/geographical_computations_for_centers.html",
    "href": "quarto/geographical_computations_for_centers.html",
    "title": "Center-level geographic calculations",
    "section": "",
    "text": "Source code\n\n\n\nThe full R script is available at:\n\nR/geographical_computations_for_centers.R\n\nThis R script file is itself reliant on the following helper files:\n\nR/setup.R\nR/functions.R",
    "crumbs": [
      "Data Processing",
      "Center-level geographic calculations"
    ]
  },
  {
    "objectID": "quarto/geographical_computations_for_centers.html#creating-distance-based-buffers-around-transplant-centers",
    "href": "quarto/geographical_computations_for_centers.html#creating-distance-based-buffers-around-transplant-centers",
    "title": "Center-level geographic calculations",
    "section": "Creating Distance-Based Buffers Around Transplant Centers",
    "text": "Creating Distance-Based Buffers Around Transplant Centers\nThis section generates geographic buffers around transplant centers at predefined distances (e.g., 50, 100, 200 miles).\nFour buffer objects are created:\n\nTransplant_center_all_buffer\nTransplant_centers_active_buffer\nTransplant_centers_HIV_buffer\nTransplant_centers_HOPE_buffer\n\nEach object is organized hierarchically by:\n\nOrgan type\nDistance\nYear (when applicable)\n\nThis nested structure allows consistent iteration across organs, time points, and buffer distances in later analyses.\n\n\nStep 1: Initialize Empty Buffer Lists\nEmpty lists are created to store buffered sf objects.\nThese will hold polygon geometries representing the catchment area around each transplant center.\n\n\n\nStep 2: Loop Over Organs and Distances\nFor each organ in organ_list\nand each distance in distance_list:\n\nOnly distances expressed in miles are processed in this block.\nMile distances are converted to meters, since the spatial data are projected in EPSG:5070 (which uses meters).\n\nDistance conversions:\n\n50 miles → 80,467.2 meters\n\n100 miles → 160,934.4 meters\n\n200 miles → 321,868 meters\n\n\n\n\nStep 3: Create Buffers for All Centers\nFor each organ and distance:\n\nst_buffer() generates circular buffer polygons around each center.\nThe result represents the geographic area within the specified radius of the center.\n\nThese are stored as:\nTransplant_center_all_buffer[[organ]][[distance]]\n\n\n\nStep 4: Create Year-Specific Buffers\nWithin each organ–distance combination, the code then loops over year_list and generates buffers for:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE (HIV D+/R+) transplant centers\n\nEach of these is buffered using the same distance in meters to ensure comparability.\nThe resulting structure is:\n\nTransplant_centers_active_buffer[[organ]][[distance]][[year]]\nTransplant_centers_HIV_buffer[[organ]][[distance]][[year]]\nTransplant_centers_HOPE_buffer[[organ]][[distance]][[year]]\n\n\n\n\nWhy This Structure Matters\nThis approach ensures:\n\nConsistent geometry projection (EPSG:5070)\nIdentical buffer distances across center categories\nA clean, iterable nested structure for downstream population overlays\nStraightforward generation of paired comparisons (e.g., 2017 vs 2022)\n\nThese buffered polygons are later intersected with census tract–level HIV population estimates to quantify geographic access to transplant programs.\n\n\nClick to show/hide R Code\n# Create buffer objects for transplant centers based on distance\n\nTransplant_center_all_buffer&lt;-list()\nTransplant_centers_active_buffer&lt;-list()\nTransplant_centers_HIV_buffer&lt;-list()\nTransplant_centers_HOPE_buffer&lt;-list()\n\n\nfor (organ_loop in organ_list){\n  for (distance_loop in distance_list){\n    \n    if (str_detect(distance_loop, \"mile\"))\n    {\n      \n      distance&lt;-case_when(\n        distance_loop==\"50mile\" ~ 80467.2,\n        distance_loop==\"100mile\" ~ 160934.4,\n        distance_loop==\"200mile\" ~ 321868\n      )\n      \n      Transplant_center_all_buffer[[organ_loop]][[distance_loop]]&lt;-st_buffer(Transplant_centers_all_sf [[organ_loop]],dist = distance)\n      \n      for (year_loop in year_list)\n      {\n        \n        Transplant_centers_active_buffer[[organ_loop]][[distance_loop]][[year_loop]]&lt;-\n          st_buffer(Transplant_centers_active_SF[[organ_loop]][[year_loop]], \n                    dist = distance)\n        \n        Transplant_centers_HIV_buffer[[organ_loop]][[distance_loop]][[year_loop]]&lt;-\n          st_buffer(Transplant_centers_HIV_sf[[organ_loop]][[year_loop]], \n                    dist = distance)\n        \n        Transplant_centers_HOPE_buffer[[organ_loop]][[distance_loop]][[year_loop]]&lt;-\n          st_buffer(Transplant_centers_HOPE_sf[[organ_loop]][[year_loop]], \n                    dist = distance)\n        \n      }\n      \n      \n    }\n    \n  }\n}",
    "crumbs": [
      "Data Processing",
      "Center-level geographic calculations"
    ]
  },
  {
    "objectID": "quarto/geographical_computations_for_centers.html#other-portions-of-the-analysis",
    "href": "quarto/geographical_computations_for_centers.html#other-portions-of-the-analysis",
    "title": "Center-level geographic calculations",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Center-level geographic calculations"
    ]
  },
  {
    "objectID": "quarto/figures.html",
    "href": "quarto/figures.html",
    "title": "Figures",
    "section": "",
    "text": "The code in this script generates figures for the manuscript.",
    "crumbs": [
      "Code to create tables and figures",
      "Figures"
    ]
  },
  {
    "objectID": "quarto/figures.html#create-dot-density-spatial-objects",
    "href": "quarto/figures.html#create-dot-density-spatial-objects",
    "title": "Figures",
    "section": "Create Dot-Density Spatial Objects",
    "text": "Create Dot-Density Spatial Objects\nThis section prepares spatial objects used to visualize the geographic distribution of HIV cases.\nRather than shading counties by case counts (a choropleth), this approach uses a dot-density map, where:\n\nEach dot represents a fixed number of HIV cases\n\nDots are distributed within county boundaries\n\nHigher-density areas visually reflect greater case burden\n\n\n\nWhy Use Dot-Density Maps?\nDot-density maps have several advantages:\n\nThey avoid misleading visual effects caused by large but sparsely populated counties\n\nThey better reflect population concentration rather than land area\n\nThey provide a more intuitive visual representation of case burden\n\nIn this implementation:\n\nEach dot represents 100 HIV cases\nDots are generated from the county-level county_cases variable\n\n\n\n\nObjects Created\nTwo spatial lists are generated:\n\ncounty_dots — raw dot-density geometries\ncounty_dots_transformed — projected versions for mapping\n\nFor each year:\n\nas_dot_density() converts county-level HIV case counts into dot geometries.\nThe resulting points are transformed to EPSG:5070 (NAD83 / Conus Albers) for consistency with other spatial layers.\n\n\n\n\nMap Projection Standardization\nThe U.S. state boundary map (states_sf) is also transformed to EPSG:5070.\nUsing a consistent projected coordinate reference system ensures:\n\nAccurate spatial alignment\nCorrect scaling\nConsistent appearance across figures\nProper overlay with transplant center buffers and tract-level data\n\n\nThese spatial objects are later layered into manuscript figures to visualize:\n\nGeographic HIV burden\nOverlay with transplant center service areas\nChanges across years\n\n\n\nClick to show/hide R Code\ncounty_dots&lt;-list()\ncounty_dots_transformed&lt;-list()\n\n\nfor (year_loop in year_list)\n  \n{\n  \n  county_dots[[year_loop]]&lt;-as_dot_density(Merged_Counties[[year_loop]], \n                                           \"county_cases\", \n                                           values_per_dot =100)\n  \n  county_dots_transformed[[year_loop]]&lt;-county_dots[[year_loop]]%&gt;%\n    st_transform(5070)\n  \n}\n\n#Transform us state map\nstates_sf_transformed&lt;-states_sf%&gt;%\n  st_transform(5070)",
    "crumbs": [
      "Code to create tables and figures",
      "Figures"
    ]
  },
  {
    "objectID": "quarto/figures.html#maps-of-active-and-hiv-performing-transplant-centers",
    "href": "quarto/figures.html#maps-of-active-and-hiv-performing-transplant-centers",
    "title": "Figures",
    "section": "Maps of Active and HIV-Performing Transplant Centers",
    "text": "Maps of Active and HIV-Performing Transplant Centers\nThis section generates manuscript-ready maps that overlay transplant center catchment areas on top of the national HIV dot-density map.\nFor each:\n\nOrgan\n\nDistance definition (e.g., 50 miles, 60 minutes)\n\nYear\n\ntwo types of figures are created:\n\nActive transplant center maps\nHIV R+ transplant center maps\n\n\n\nMap Layers\nEach figure includes three spatial layers:\n\nDot-density HIV layer\n\nDerived from county-level HIV case counts\n\nEach dot represents 100 HIV cases\n\nProvides visual context for geographic burden\n\nTransplant center catchment areas\n\nEither active-center buffers or HIV R+ buffers\n\nDisplayed as red outlines\n\nRepresent geographic access zones\n\nU.S. state boundaries\n\nProvide geographic reference\n\nDrawn without fill for clarity\n\n\nAll layers use the same projected coordinate system (EPSG:5070) to ensure proper alignment.\n\n\n\nActive Center Maps\nThese maps show:\n\nAll active transplant centers for a given organ\nTheir associated catchment areas\nOverlayed on national HIV case distribution\n\nThe title specifies:\n\nOrgan type\n\nYear\n\nEach figure is saved as an .svg file in the corresponding organ-specific folder.\n\n\n\nHIV R+ Center Maps\nThese maps focus specifically on:\n\nCenters that performed HIV R+ transplants\n\nTheir catchment areas\n\nOverlayed on HIV case distribution\n\nThe title reflects the analysis year (e.g., 2013–2017 window where applicable).\nThese figures visually illustrate:\n\nHow geographic access for PLWH changes over time\n\nDifferences between general active centers and HIV-performing centers\n\nRegions with high HIV burden but limited transplant access\n\n\n\n\nWhy These Maps Matter\nThese figures translate the analytic results into intuitive geographic visualizations that allow readers to:\n\nSee where HIV burden is concentrated\n\nIdentify regions lacking nearby transplant access\n\nCompare service-area expansion or contraction across years\n\nAssess disparities between general and HIV-specific transplant availability\n\nThe resulting .svg files are publication-quality and scalable for manuscript submission.\n\n\nClick to show/hide R Code\nActivemap&lt;-list()\nHIV_map&lt;-list()\n\nfor (organ_loop in organ_list) {\n  for (distance_loop in distance_list){\n    for (year_loop in year_list) {\n      \n      #Map all transplant centers and a 50-mile catchment area upon the dot map of HIV\n      Activemap[[organ_loop]][[year_loop]]&lt;-ggplot() +\n        geom_sf(data = county_dots_transformed[[year_loop]], size = 0.3, color = \"navy\", alpha = 0.5) +\n        theme_minimal() +\n        labs(title = paste(\"Radius around\",organ_loop, \"transplant centers,\", year_loop),\n             subtitle = \"(1 dot = 100 HIV cases)\")+\n        geom_sf(data=Transplant_centers_active_buffer[[organ_loop]][[distance_loop]][[year_loop]], color=\"red\", fill=NA)+\n        geom_sf(data=states_sf_transformed, fill=NA)\n      ggsave(paste0(\"figures/\",organ_loop,\"/Active \", organ_loop,\" \",distance_loop,\" map\", year_loop,\".svg\"))\n      \n      \n      \n      #Map transplant centers with HIV R+ and a 60 minute catchment area upon the dot map of HIV, 2013-2017\n      HIV_map[[organ_loop]][[year_loop]]&lt;-ggplot() +\n        geom_sf(data = county_dots_transformed[[year_loop]], size = 0.3, color = \"navy\", alpha = 0.5) +\n        theme_minimal() +\n        labs(title = paste0(as.numeric(year_loop)-4, \" - \", year_loop))+\n        geom_sf(data=Transplant_centers_HIV_buffer[[organ_loop]][[distance_loop]][[year_loop]], color=\"red\", fill=NA)+\n        geom_sf(data=states_sf_transformed, fill=NA)\n      ggsave(paste0(\"figures/\",organ_loop,\"/HIV \", organ_loop,\" \",distance_loop,\" map\", year_loop,\".svg\"))\n      \n      \n    }\n  }\n}",
    "crumbs": [
      "Code to create tables and figures",
      "Figures"
    ]
  },
  {
    "objectID": "quarto/figures.html#paired-plots-for-plwh-comparing-years",
    "href": "quarto/figures.html#paired-plots-for-plwh-comparing-years",
    "title": "Figures",
    "section": "Paired Plots for PLWH Comparing Years",
    "text": "Paired Plots for PLWH Comparing Years\nThis section generates side-by-side comparison plots to visualize changes in geographic access between 2017 and 2022.\nRather than showing maps, these figures present paired summary plots that directly compare:\n\nCoverage in 2017\n\nCoverage in 2022\n\nfor each organ, distance definition, and center category.\n\n\nWhat These Plots Show\nFor each:\n\nOrgan\n\nDistance (e.g., 50 miles, 60 minutes)\n\nthe script produces paired plots for:\n\nActive transplant centers\n\nActive centers (with optional comparison of PLWH vs non-HIV population)\n\nHIV R+ centers\n\nHOPE (HIV D+/R+) centers\n\nEach plot compares the percentage of the population within geographic reach across the two years.\n\n\n\nHow the Plots Are Created\nAll plots are generated using a reusable helper function:\nmake_paired_plot()\nThis function:\n\nExtracts aggregated results\n\nAligns year-specific values\n\nFormats titles and labels\n\nProduces consistent visual styling\n\nThe distance_label variable converts internal codes (e.g., 50mile, 60min) into reader-friendly labels such as:\n\n“50 miles”\n“60 mins”\n\n\n\n\nComparing PLWH and Non-HIV Populations\nFor active centers, a second version of the paired plot is generated with:\ninclude_nonHIV = TRUE\nThis version overlays:\n\nCoverage for people living with HIV\n\nCoverage for the non-HIV population\n\nThis allows visual assessment of whether geographic access differs between populations.\n\n\n\nOutput Format\nEach plot is saved in two formats:\n\n.svg — publication-quality vector graphics\n\n.png — presentation-friendly raster format\n\nImages are saved at:\n\nWidth: 12 inches\n\nHeight: 6 inches\n\nWhite background\n\nHigh-resolution rendering via ragg\n\n\n\n\nWhy These Figures Matter\nThese paired plots provide a clear visual summary of:\n\nExpansion or contraction of transplant access over time\n\nDifferences between center categories\n\nPotential disparities in geographic coverage\n\nOrgan-specific variation in access\n\nThey translate tabular percentage changes into intuitive, publication-ready visuals suitable for the manuscript.\n\n\nClick to show/hide R Code\nfor (organ_loop in organ_list) {\n  for (distance_loop in distance_list){\n    \n    \n    \n    #Create distance label\n    distance_label &lt;- dplyr::case_when(\n      stringr::str_detect(distance_loop, \"mile$\") ~ \n        paste0(stringr::str_remove(distance_loop, \"mile\"), \" miles\"),\n      stringr::str_detect(distance_loop, \"min$\") ~ \n        paste0(stringr::str_remove(distance_loop, \"min\"), \" mins\")\n    )\n    \n    \n    #Create paired plot for active, no HIV\n    paired_plot&lt;-make_paired_plot(organ=organ_loop,\n                                  distance=distance_loop,\n                                  outcome=\"active\",\n                                  buffer_list=Transplant_centers_active_buffer,\n                                  year1=\"2017\",\n                                  year2=\"2022\",\n                                  plottitle=glue::glue(\"Active {organ_loop} transplant center, {distance_label}\")\n    )\n    \n    \n    \n    \n    ggsave(glue(\"figures/{organ_loop}/Combined {organ_loop} plot 2026-2-14 {distance_loop} active.svg\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           bg = \"white\")\n    \n    ggsave(glue(\"figures/{organ_loop}/Combined {organ_loop} plot 2026-2-14 {distance_loop} active.png\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           dpi = 150,\n           device = ragg::agg_png,\n           bg = \"white\")\n\n    \n    #Create paired plot for active, comparing HIV to non-HIV\n    paired_plot&lt;-make_paired_plot(organ=organ_loop,\n                                  distance=distance_loop,\n                                  outcome=\"active\",\n                                  buffer_list=Transplant_centers_active_buffer,\n                                  year1=\"2017\",\n                                  year2=\"2022\",\n                                  plottitle=glue::glue(\"Active {organ_loop} transplant center, {distance_label}\"),\n                                  include_nonHIV = TRUE\n    )\n    \n    \n    \n    \n    ggsave(glue(\"figures/{organ_loop}/Active{organ_loop}CenterCombinedPlot{distance_loop}.svg\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           bg = \"white\")\n    \n    ggsave(glue(\"figures/{organ_loop}/Active{organ_loop}CenterCombinedPlot{distance_loop}.png\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           dpi = 150,\n           device = ragg::agg_png,\n           bg = \"white\")\n    \n    \n    \n    #Create paired plot for HIV\n    paired_plot&lt;-make_paired_plot(organ=organ_loop,\n                                  distance=distance_loop,\n                                  outcome=\"HIV\",\n                                  buffer_list=Transplant_centers_HIV_buffer,\n                                  year1=\"2017\",\n                                  year2=\"2022\",\n                                  plottitle=glue::glue(\"Active HIV R+ {organ_loop} transplant center, {distance_label}\"))\n    \n    \n    \n    \n    ggsave(glue(\"figures/{organ_loop}/Combined {organ_loop} plot 2026-2-14 {distance_loop} HIV.svg\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           bg = \"white\")\n    \n    ggsave(glue(\"figures/{organ_loop}/Combined {organ_loop} plot 2026-2-14 {distance_loop} HIV.png\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           dpi = 150,\n           device = ragg::agg_png,\n           bg = \"white\")\n    \n    \n    #Create paired plot\n    paired_plot&lt;-make_paired_plot(organ=organ_loop,\n                                  distance=distance_loop,\n                                  outcome=\"HOPE\",\n                                  buffer_list=Transplant_centers_HOPE_buffer,\n                                  year1=\"2017\",\n                                  year2=\"2022\",\n                                  plottitle=glue::glue(\"Active HOPE D+/R+ {organ_loop} transplant center, {distance_label}\"))\n    \n    \n    \n    \n    ggsave(glue(\"figures/{organ_loop}/Combined {organ_loop} plot 2026-2-14 {distance_loop} HOPE.svg\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           bg = \"white\")\n    \n    ggsave(glue(\"figures/{organ_loop}/Combined {organ_loop} plot 2026-2-14 {distance_loop} HOPE.png\"), \n           paired_plot, \n           width = 12, height = 6, units = \"in\",\n           dpi = 150,\n           device = ragg::agg_png,\n           bg = \"white\")\n    \n    \n    \n  }\n}",
    "crumbs": [
      "Code to create tables and figures",
      "Figures"
    ]
  },
  {
    "objectID": "quarto/figures.html#tract-level-catchment-distribution-plots-beeswarm-plots",
    "href": "quarto/figures.html#tract-level-catchment-distribution-plots-beeswarm-plots",
    "title": "Figures",
    "section": "Tract-Level Catchment Distribution Plots (Beeswarm Plots)",
    "text": "Tract-Level Catchment Distribution Plots (Beeswarm Plots)\nThis final section generates tract-level distribution plots that visualize how HIV burden is distributed across transplant center catchment areas.\nUnlike the previous paired plots—which summarize overall percentages—these figures show variation across individual census tracts.\n\n\nWhat These Plots Display\nFor each:\n\nOrgan\n\nDistance definition\n\nthe function plot_center_HIV_catchment() produces a beeswarm-style plot comparing:\n\n2017\n\n2022\n\nEach point represents a census tract within the active-center catchment area.\nThese plots allow readers to see:\n\nThe distribution of HIV burden across accessible tracts\n\nWhether access expansion disproportionately affected higher- or lower-burden areas\n\nHow tract-level patterns shift over time\n\n\n\n\nWhy Use a Beeswarm-Style Plot?\nA beeswarm (or jittered dot) plot:\n\nDisplays each tract individually\n\nAvoids overplotting\n\nPreserves the full distribution\n\nMakes shifts in spread, clustering, or skewness visible\n\nThis complements the aggregate percentage results by showing the underlying geographic heterogeneity.\n\n\n\nOutput Format\nEach plot is saved as:\n\n.svg — scalable vector graphic suitable for publication\n\n.png — high-resolution raster image for presentations\n\nWhite backgrounds and high-resolution rendering ensure consistent visual quality across manuscript and slide use.\n\n\n\nWhy This Figure Matters\nThese plots move beyond national summaries and highlight:\n\nWithin-catchment variation\n\nRegional concentration of HIV burden\n\nWhether access improvements are evenly distributed\n\nTogether with maps and paired summary plots, they provide a multi-level view of geographic access to transplant services.\n\n\nClick to show/hide R Code\nfor (organ_loop in organ_list) {\n  for (distance_loop in distance_list){\n    \n    \n    catchment_plot&lt;-plot_center_HIV_catchment(organ=organ_loop,\n                              distance=distance_loop,\n                              buffer_list=tracts_in_buffers_active[[organ_loop]][[distance_loop]],\n                              year1=\"2017\",\n                              year2=\"2022\")\n    \n    \n    \n    ggsave(glue(\"figures/{organ_loop}/Beeswarm {organ_loop} plot 2026-2-14 {distance_loop}.svg\"), \n           catchment_plot, \n   #        width = 12, height = 6, units = \"in\",\n           bg = \"white\")\n    \n    ggsave(glue(\"figures/{organ_loop}/Beeswarm {organ_loop} plot 2026-2-14 {distance_loop}.png\"), \n           catchment_plot, \n  #         width = 12, height = 6, units = \"in\",\n           dpi = 150,\n           device = ragg::agg_png,\n           bg = \"white\")\n  }\n}",
    "crumbs": [
      "Code to create tables and figures",
      "Figures"
    ]
  },
  {
    "objectID": "quarto/figures.html#other-portions-of-the-analysis",
    "href": "quarto/figures.html#other-portions-of-the-analysis",
    "title": "Figures",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Code to create tables and figures",
      "Figures"
    ]
  },
  {
    "objectID": "quarto/classify_centers.html",
    "href": "quarto/classify_centers.html",
    "title": "Classify centers",
    "section": "",
    "text": "The code in this script creates the cohort of kidney transplant patients eligible for the study for use in other scripts.",
    "crumbs": [
      "Data Processing",
      "Classify centers"
    ]
  },
  {
    "objectID": "quarto/classify_centers.html#initialize-lists",
    "href": "quarto/classify_centers.html#initialize-lists",
    "title": "Classify centers",
    "section": "Initialize lists",
    "text": "Initialize lists\nThis portion of the code initializes lists to classify transplant centers by activity status and HIV transplant volume for each organ and year of interest. These classifications are used downstream for geographic access analyses, state-level summaries, and figure generation.\nFor example, the nested list HOPE_center_volumes can be used to identify the number of HIV D+/R+ transplants performed at each transplant center for each organ and each time period.\nHOPE_center_volume[[\"kidney]][[\"2017\"]] will yield a data frame of HOPE kidney volumes for centers that performed at least one HOPE adult transplant in the 2013-2017 time period.\nKey lists created:\n\nActive_tx_centers: any adult transplant in the year defined by the inner list\nHIV_center_volumes: any HIV R+ transplant in the five-year period\nHOPE_center_volumes: any HIV D+/R+ transplant in the five-year period\nState_level_transplant_volumes: HIV R+ volumes by state\nTransplant_centers_active: similar to the first list active_tx_centers but with different variable composition\n\n\n\nClick to show/hide R Code\nfor (organ_loop in organ_list)\n{\n  \n  for (year_loop in year_list)\n    \n    \n  {\n    \n    Active_tx_centers[[organ_loop]][[year_loop]]&lt;-tx[[organ_loop]]%&gt;%\n      filter(REC_AGE_IN_MONTHS_AT_TX&gt;=216)%&gt;% #Adult recipient\n      mutate(year_transplant=year(REC_TX_DT))%&gt;%\n      filter(year_transplant==as.numeric(year_loop))%&gt;%\n      group_by(REC_CTR_CD)%&gt;%\n      count()%&gt;%\n      pull(REC_CTR_CD)\n    \n    #Calculate center level volumes for pts with HIV in five-year period ending in year for active centers\n    HIV_center_volumes[[organ_loop]][[year_loop]]&lt;-tx[[organ_loop]]%&gt;%\n      filter(REC_HIV_STAT==\"P\")%&gt;%\n      filter(REC_AGE_IN_MONTHS_AT_TX&gt;=216)%&gt;% #Adult recipient\n      mutate(year_transplant=year(REC_TX_DT))%&gt;%\n      filter(year_transplant&gt;=(as.numeric(year_loop)-4) & year_transplant&lt;=as.numeric(year_loop))%&gt;%\n      group_by(REC_CTR_CD)%&gt;%\n      count()%&gt;%\n      filter(REC_CTR_CD %in% Active_tx_centers[[organ_loop]][[year_loop]])\n    \n    \n    #Identify HOPE centers in years of interest\n    HOPE_center_volumes[[organ_loop]][[year_loop]]&lt;-tx[[organ_loop]]%&gt;%\n      filter(REC_HIV_STAT==\"P\")%&gt;%\n      filter(REC_AGE_IN_MONTHS_AT_TX&gt;=216)%&gt;%\n      mutate(year_transplant=year(REC_TX_DT ))%&gt;%\n      filter(year_transplant&gt;=(as.numeric(year_loop)-4) & year_transplant&lt;=as.numeric(year_loop))%&gt;%\n      left_join(donor_deceased)%&gt;%\n      filter(DON_HIV_NAT %in% c(\"P\", \"P: Positive\")| \n               DON_ANTI_HIV %in% c(\"P\", \"P: Positive\"))%&gt;%\n      group_by(REC_CTR_CD   )%&gt;%\n      count()\n    \n    #Convert to state transplant volumes for recipients with HIV\n    State_level_transplant_volumes[[organ_loop]][[year_loop]]&lt;-HIV_center_volumes[[organ_loop]][[year_loop]]%&gt;%\n      mutate(state_code = substr(REC_CTR_CD, 1, 2))%&gt;%\n      group_by(state_code)%&gt;%\n      summarize(total_HIV_transplants=sum(n, na.rm = TRUE))\n    \n    #Create DFs for active centers in years of interest\n    Transplant_centers_active[[organ_loop]][[year_loop]]&lt;-Transplant_centers_all[[organ_loop]]%&gt;%\n      filter(OTCCode %in% Active_tx_centers[[organ_loop]][[year_loop]])\n    \n  }\n}",
    "crumbs": [
      "Data Processing",
      "Classify centers"
    ]
  },
  {
    "objectID": "quarto/classify_centers.html#other-portions-of-the-analysis",
    "href": "quarto/classify_centers.html#other-portions-of-the-analysis",
    "title": "Classify centers",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Classify centers"
    ]
  },
  {
    "objectID": "quarto/background.html",
    "href": "quarto/background.html",
    "title": "Clinical background",
    "section": "",
    "text": "Solid organ transplantation has transformed survival for patients with end-stage organ disease. For people living with HIV (PLWH), access to transplantation has historically been limited by medical uncertainty, regulatory restrictions, and stigma. Over the past two decades, durable viral suppression with modern antiretroviral therapy (ART) and accumulated transplant experience have reshaped the clinical landscape.\nThis project integrates HIV epidemiologic data with SRTR transplant center information to examine geographic access to HIV-experienced transplant programs across the United States.",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#overview",
    "href": "quarto/background.html#overview",
    "title": "Clinical background",
    "section": "",
    "text": "Solid organ transplantation has transformed survival for patients with end-stage organ disease. For people living with HIV (PLWH), access to transplantation has historically been limited by medical uncertainty, regulatory restrictions, and stigma. Over the past two decades, durable viral suppression with modern antiretroviral therapy (ART) and accumulated transplant experience have reshaped the clinical landscape.\nThis project integrates HIV epidemiologic data with SRTR transplant center information to examine geographic access to HIV-experienced transplant programs across the United States.",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#hiv-epidemiology-and-geography-in-the-united-states",
    "href": "quarto/background.html#hiv-epidemiology-and-geography-in-the-united-states",
    "title": "Clinical background",
    "section": "HIV epidemiology and geography in the United States",
    "text": "HIV epidemiology and geography in the United States\nNational HIV surveillance in the United States is maintained through CDC’s HIV data systems, with regularly updated public data products and technical resources:\n\nCDC HIV Data (landing page): https://www.cdc.gov/hiv-data/index.html\nAbout HIV Surveillance and Monitoring: https://www.cdc.gov/hiv-data/about/index.html\n\nTo support geographic analyses, CDC’s NCHHSTP AtlasPlus provides interactive tools to visualize and extract data (tables/maps/charts) for HIV and related conditions:\n\nAbout AtlasPlus: https://www.cdc.gov/nchhstp/about/atlasplus.html\nAtlasPlus (main): https://gis.cdc.gov/grasp/nchhstpatlas/main.html\nAtlasPlus Tables: https://gis.cdc.gov/grasp/nchhstpatlas/tables.html\nAtlasPlus Maps: https://gis.cdc.gov/grasp/nchhstpatlas/maps.html\n\nBecause HIV burden is geographically heterogeneous, comparing HIV prevalence patterns with the distribution of transplant programs is a clinically meaningful way to assess structural access.",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#solid-organ-transplantation-in-people-with-hiv",
    "href": "quarto/background.html#solid-organ-transplantation-in-people-with-hiv",
    "title": "Clinical background",
    "section": "Solid organ transplantation in people with HIV",
    "text": "Solid organ transplantation in people with HIV\nIn the early HIV era, transplantation was often viewed as contraindicated due to concerns about opportunistic infections, drug–drug interactions, and poor outcomes. In the modern ART era, multiple cohorts and registry analyses support transplantation for carefully selected candidates living with HIV.",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#kidney-transplantation",
    "href": "quarto/background.html#kidney-transplantation",
    "title": "Clinical background",
    "section": "Kidney transplantation",
    "text": "Kidney transplantation\nKidney transplantation outcomes in carefully selected recipients living with HIV have been demonstrated in multicenter prospective work in the ART era.\nSeminal multicenter trial:\n\nStock et al., New England Journal of Medicine (2010): https://www.nejm.org/doi/full/10.1056/NEJMoa1001197\nPubMed record: https://pubmed.ncbi.nlm.nih.gov/21083386/",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#liver-transplantation",
    "href": "quarto/background.html#liver-transplantation",
    "title": "Clinical background",
    "section": "Liver transplantation",
    "text": "Liver transplantation\nLiver transplantation for people living with HIV (including HCV coinfection) has been evaluated in prospective multicenter U.S. cohorts.\nTerrault et al., Liver Transplantation (2012):\n\nFull text: https://onlinelibrary.wiley.com/doi/full/10.1002/lt.23411\nPubMed record: https://pubmed.ncbi.nlm.nih.gov/22328294/\nOpen-access PMC version: https://pmc.ncbi.nlm.nih.gov/articles/PMC3358510/",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#heart-transplantation",
    "href": "quarto/background.html#heart-transplantation",
    "title": "Clinical background",
    "section": "Heart transplantation",
    "text": "Heart transplantation\nRegistry-based analyses suggest that heart transplantation in people living with HIV can achieve acceptable outcomes in carefully selected patients with well-controlled HIV, though numbers remain relatively small and center experience is concentrated.\nExamples:\n\nMadan et al., American Journal of Transplantation (2019) full text: https://www.amjtransplant.org/article/S1600-6135%2822%2909086-4/fulltext\nPubMed record: https://pubmed.ncbi.nlm.nih.gov/30614612/\nSRTR-based comparison study (open access, PMC): https://pmc.ncbi.nlm.nih.gov/articles/PMC6452439/",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#lung-transplantation",
    "href": "quarto/background.html#lung-transplantation",
    "title": "Clinical background",
    "section": "Lung transplantation",
    "text": "Lung transplantation\nLung transplantation in people living with HIV has historically been uncommon, but cohort-level experience suggests feasibility in carefully selected patients with controlled HIV, while emphasizing careful attention to rejection risk and medication interactions.\nKey cohort experience (open access, PMC):\n\nKern et al., Annals of the American Thoracic Society (2014): https://pmc.ncbi.nlm.nih.gov/articles/PMC4213997/\nPubMed record: https://pubmed.ncbi.nlm.nih.gov/24964265/",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#pancreas-and-simultaneous-pancreaskidney-spk-transplantation",
    "href": "quarto/background.html#pancreas-and-simultaneous-pancreaskidney-spk-transplantation",
    "title": "Clinical background",
    "section": "Pancreas and simultaneous pancreas–kidney (SPK) transplantation",
    "text": "Pancreas and simultaneous pancreas–kidney (SPK) transplantation\nPancreas transplantation and SPK in people living with HIV remain rare and concentrated in a limited number of programs, but case reports and small series support feasibility in highly selected candidates.\nExamples:\n\nAkhtar et al. (SPK case report), PubMed: https://pubmed.ncbi.nlm.nih.gov/22172869/\nMiro et al. (SPK experience/literature), PubMed: https://pubmed.ncbi.nlm.nih.gov/21094878/\nGrossi et al. (SPK series), PubMed: https://pubmed.ncbi.nlm.nih.gov/22221659/",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#the-hope-act-and-evolving-u.s.-policy",
    "href": "quarto/background.html#the-hope-act-and-evolving-u.s.-policy",
    "title": "Clinical background",
    "section": "The HOPE Act and evolving U.S. policy",
    "text": "The HOPE Act and evolving U.S. policy\nUntil 2013, federal law prohibited transplantation of organs from donors with HIV. The HIV Organ Policy Equity (HOPE) Act (Public Law 113–51) created a pathway to allow transplantation of organs from donors with HIV into recipients living with HIV under specified safeguards.\n\nHOPE Act statute PDF (Congress.gov): https://www.congress.gov/113/statute/STATUTE-127/STATUTE-127-Pg579.pdf\n\nIn late 2024, HHS finalized changes determining that kidney and liver HOPE transplants no longer require participation in IRB-approved research protocols (i.e., removing the “research-only” requirement for these organs):\n\nHHS Final Rule (Federal Register, Nov 27, 2024): https://www.federalregister.gov/documents/2024/11/27/2024-27410/organ-procurement-and-transplantation-implementation-of-the-hiv-organ-policy-equity-hope-act\nNIH Final Notice (Federal Register, Dec 30, 2024): https://www.federalregister.gov/documents/2024/12/30/2024-31265/final-revised-human-immunodeficiency-virus-hiv-organ-policy-equity-act-safeguards-and-research\n\nOPTN/HRSA maintains a central HOPE Act resource page and notes the current status of the OPTN open variance:\n\nHRSA HOPE Act resource page: https://www.hrsa.gov/optn/professionals/resources/hope-act",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#why-geographic-analysis-matters",
    "href": "quarto/background.html#why-geographic-analysis-matters",
    "title": "Clinical background",
    "section": "Why geographic analysis matters",
    "text": "Why geographic analysis matters\nHIV burden is geographically uneven, while transplant centers are clustered in metropolitan and academic hubs. For organs with fewer programs overall (heart, lung, pancreas/SPK), geographic access constraints may be amplified.\nMapping HIV burden alongside transplant program locations and travel-time catchments (e.g., 30/60/120 minutes) supports evaluation of structural access and potential regional inequities.",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#data-sources-used-in-this-project",
    "href": "quarto/background.html#data-sources-used-in-this-project",
    "title": "Clinical background",
    "section": "Data sources used in this project",
    "text": "Data sources used in this project\nHIV epidemiology (CDC)\n\nCDC HIV Data: https://www.cdc.gov/hiv-data/index.html\nCDC AtlasPlus: https://www.cdc.gov/nchhstp/about/atlasplus.html\n\nTransplant program reporting (SRTR)\n\nSRTR home: https://www.srtr.org/\nProgram-Specific Reports: https://www.srtr.org/reports/program-specific-reports/\n\nAbout SRTR reports: https://www.srtr.org/reports/about-srtr-reports/",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/background.html#clinical-framing-of-this-analysis",
    "href": "quarto/background.html#clinical-framing-of-this-analysis",
    "title": "Clinical background",
    "section": "Clinical framing of this analysis",
    "text": "Clinical framing of this analysis\nThis analysis does not adjudicate clinical outcomes. Instead, it addresses a structural access question:\n\nDoes the geographic distribution of HIV-experienced transplant programs align with the geographic burden of HIV disease?\n\nUnderstanding this alignment informs health equity efforts, referral networks, and transplant policy implementation.",
    "crumbs": [
      "Background",
      "Clinical background"
    ]
  },
  {
    "objectID": "quarto/about.html",
    "href": "quarto/about.html",
    "title": "About",
    "section": "",
    "text": "Pending",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "quarto/about.html#other-portions-of-the-analysis",
    "href": "quarto/about.html#other-portions-of-the-analysis",
    "title": "About",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.",
    "crumbs": [
      "About"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Overview",
    "section": "",
    "text": "Solid organ transplantation has transformed survival for patients with end-stage organ disease. For people living with HIV (PLWH), access to transplantation has historically been limited by medical uncertainty, regulatory restrictions, and stigma. Over the past two decades, however, advances in antiretroviral therapy (ART) and transplant immunology have substantially changed the clinical landscape.\nThis project integrates HIV epidemiologic data with SRTR transplant center data to examine geographic access to HIV-experienced transplant programs across the United States.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#clinical-background",
    "href": "index.html#clinical-background",
    "title": "Overview",
    "section": "",
    "text": "Solid organ transplantation has transformed survival for patients with end-stage organ disease. For people living with HIV (PLWH), access to transplantation has historically been limited by medical uncertainty, regulatory restrictions, and stigma. Over the past two decades, however, advances in antiretroviral therapy (ART) and transplant immunology have substantially changed the clinical landscape.\nThis project integrates HIV epidemiologic data with SRTR transplant center data to examine geographic access to HIV-experienced transplant programs across the United States.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#methods",
    "href": "index.html#methods",
    "title": "Overview",
    "section": "Methods",
    "text": "Methods\nThis project evaluates geographic access to solid organ transplant centers for people living with HIV in the United States. County-level HIV prevalence data from the CDC NCHHSTP AtlasPlus system were integrated with national transplant center location data. Transplant centers were classified by activity status and HIV program participation (including HOPE Act programs).\nGeographic accessibility was estimated using drive-time isochrones generated at standardized morning departure times. Isochrones were unioned across centers and spatially joined to county and tract-level population data to estimate the number and proportion of people living with HIV within defined travel-time thresholds.\nAll data processing and spatial analyses were conducted in R using reproducible workflows built on sf, tigris, and custom functions documented throughout this site. No spatial smoothing or statistical modeling was applied unless explicitly stated.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#results",
    "href": "index.html#results",
    "title": "Overview",
    "section": "Results",
    "text": "Results\nSee the detailed results pages linked via the left sidebar.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#reproducibility",
    "href": "index.html#reproducibility",
    "title": "Overview",
    "section": "Reproducibility",
    "text": "Reproducibility\nAll analyses presented on this website are fully reproducible.\nThe complete source code used to perform the full analysis and generate the tables and figures is publicly available at this GitHub repo. The R script R/main.R will run the R subscripts needed for this analysis in the order they are to be run. Model assumptions, parameter values, and analytic workflows are documented in the repository to facilitate transparency and reuse.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#abstractsmanuscripts",
    "href": "index.html#abstractsmanuscripts",
    "title": "Overview",
    "section": "Abstracts/manuscripts",
    "text": "Abstracts/manuscripts\nThis analysis has yet to be published to date.\nAbstracts have been presented or will be presented at:\n\nIDWeek 2025 (click below to enlarge) \nInternational Society of Heart and Lung Transplantation 2026\nAmerican Transplant Congress 2026",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "quarto/analysis_methods.html",
    "href": "quarto/analysis_methods.html",
    "title": "Background of R analysis methods",
    "section": "",
    "text": "This section describes the R analysis methods",
    "crumbs": [
      "Background",
      "Description of R analysis methods"
    ]
  },
  {
    "objectID": "quarto/analysis_methods.html#initial-data-loading-and-preprocessing-of-usrds-core-and-transplant-files",
    "href": "quarto/analysis_methods.html#initial-data-loading-and-preprocessing-of-usrds-core-and-transplant-files",
    "title": "Background of R analysis methods",
    "section": "Initial data loading and preprocessing of USRDS core and transplant files",
    "text": "Initial data loading and preprocessing of USRDS core and transplant files\nPending",
    "crumbs": [
      "Background",
      "Description of R analysis methods"
    ]
  },
  {
    "objectID": "quarto/analysis_methods.html#other-portions-of-the-analysis",
    "href": "quarto/analysis_methods.html#other-portions-of-the-analysis",
    "title": "Background of R analysis methods",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Background",
      "Description of R analysis methods"
    ]
  },
  {
    "objectID": "quarto/calculate_aggregated_results.html",
    "href": "quarto/calculate_aggregated_results.html",
    "title": "Calculate aggregated results",
    "section": "",
    "text": "This script aggregates tract-level geographic results into organ-level summary tables.\nEarlier steps:\nHere, we translate those geographic intersections into interpretable population coverage statistics.",
    "crumbs": [
      "Data Processing",
      "Calculate aggregated results"
    ]
  },
  {
    "objectID": "quarto/calculate_aggregated_results.html#initialize-result-containers-and-baseline-totals",
    "href": "quarto/calculate_aggregated_results.html#initialize-result-containers-and-baseline-totals",
    "title": "Calculate aggregated results",
    "section": "Initialize Result Containers and Baseline Totals",
    "text": "Initialize Result Containers and Baseline Totals\nThis first section prepares the data structures that will store aggregated coverage results and calculates the population baselines used as denominators.\n\nStep 1: Create Empty Results Tables\nFor each organ, two empty result tables are initialized:\n\nResults_HIV_df — for people living with HIV (PLWH)\nResults_nonHIV_df — for people without HIV\n\nEach table is structured to store:\n\nCharacteristic — the center category and distance (e.g., active 60min)\nNumerator — population within the catchment area\nDenominator — total population nationwide (for that year)\nPercentage — share of the total population within reach\nYear — analysis year\n\nThese tables will be filled in later sections of the script.\n\n\n\nStep 2: Calculate Total Population Denominators\nBefore computing coverage percentages, we calculate the total estimated population counts across all census tracts.\nFor each year:\n\nThe total number of estimated HIV cases (tract_cases) is summed across all tracts.\nThe total estimated HIV-negative population (tract_noncases) is summed across all tracts.\nGeometry is dropped before summarizing to improve computational efficiency.\n\nThese totals are stored in:\n\nTract_total_HIV_cases[[year]]\nTract_total_nonHIV_cases[[year]]\n\nThese values serve as the denominators for all subsequent percentage calculations.\n\n\nClick to show/hide R Code\nResults_HIV_df&lt;-list()\nResults_nonHIV_df&lt;-list()\nTract_total_HIV_cases&lt;-list()\nTract_total_nonHIV_cases&lt;-list()\n                      \nfor (organ_loop in organ_list)\n  \n{\n  \n  #Initialize data frames\n  Results_HIV_df[[organ_loop]] &lt;- tibble(\n    Characteristic = character(),\n    Numerator = numeric(),\n    Denominator = numeric(),\n    Percentage = numeric(),\n    Year= numeric()\n  )\n  \n  Results_nonHIV_df[[organ_loop]] &lt;- tibble(\n    Characteristic = character(),\n    Numerator = numeric(),\n    Denominator = numeric(),\n    Percentage = numeric(),\n    Year= numeric()\n  )\n}\n  \n  for (year_loop in year_list)\n  {\n  \n  #Calculate the total number of HIV cases assigned to a tract\n  Tract_total_HIV_cases[[year_loop]]&lt;-Merged_tracts[[year_loop]]%&gt;%\n    st_drop_geometry()%&gt;%\n    summarize(total_cases=sum(tract_cases, na.rm=TRUE))%&gt;%\n    pull(total_cases)%&gt;%\n    first()\n  \n  #Calculate the total number of nonHIV cases (i.e. people without HIV) assigned to a tract\n  Tract_total_nonHIV_cases[[year_loop]]&lt;-Merged_tracts[[year_loop]]%&gt;%\n    st_drop_geometry()%&gt;%\n    summarize(total_cases=sum(tract_noncases, na.rm=TRUE))%&gt;%\n    pull(total_cases)%&gt;%\n    first()\n}",
    "crumbs": [
      "Data Processing",
      "Calculate aggregated results"
    ]
  },
  {
    "objectID": "quarto/calculate_aggregated_results.html#aggregate-coverage-results-for-people-living-with-hiv-plwh",
    "href": "quarto/calculate_aggregated_results.html#aggregate-coverage-results-for-people-living-with-hiv-plwh",
    "title": "Calculate aggregated results",
    "section": "Aggregate Coverage Results for People Living with HIV (PLWH)",
    "text": "Aggregate Coverage Results for People Living with HIV (PLWH)\nThis section calculates the proportion of people living with HIV who reside within transplant center catchment areas.\nFor each:\n\nOrgan\n\nDistance (e.g., 50 miles, 60 minutes)\n\nYear\n\nCenter category (active, HIV, HOPE)\n\nthe script computes:\n\nThe numerator: total estimated HIV cases (tract_cases) located within the united catchment area\n\nThe denominator: total estimated HIV cases across all census tracts for that year\n\nThe percentage: share of PLWH within geographic reach\n\n\nHow It Works\nFor each combination of organ, distance, year, and center type:\n\nThe appropriate united tract-buffer object is dynamically selected.\nGeometry is dropped to improve efficiency.\nTract-level HIV cases are summed within the catchment area.\nThat sum is divided by the national total for the year.\nA new row is appended to Results_HIV_df[[organ]].\n\nThe resulting table quantifies geographic access to transplant services for people living with HIV and enables comparison:\n\nAcross organs\n\nAcross distances\n\nAcross center categories\n\nAcross time (e.g., 2017 vs 2022)\n\n\n\nClick to show/hide R Code\n#Calculate table for PLWH\n\n\nfor (organ_loop in organ_list)\n{\n  for (distance_loop in distance_list){\n    for (year_loop in year_list){\n      for (type in c(\"active\", \"HIV\", \"HOPE\")) {\n        \n        name_of_df&lt;-paste0(\"tracts_in_buffers_\", type, \"_united\")\n        print(name_of_df)\n        \n        temp_Num&lt;-get(name_of_df)[[organ_loop]][[distance_loop]][[year_loop]]%&gt;%\n          st_drop_geometry()%&gt;%\n          group_by(catchment_area)%&gt;%\n          summarize(total_cases=sum(tract_cases, na.rm=TRUE))%&gt;%\n          pull(total_cases)%&gt;%\n          first()\n        \n        temp_Denom&lt;-Tract_total_HIV_cases[[year_loop]]\n        \n        \n        Results_HIV_df[[organ_loop]]&lt;-Results_HIV_df[[organ_loop]]%&gt;%\n          add_row(\n            Characteristic = paste(type, distance_loop),\n            Numerator = round(temp_Num, 0),\n            Denominator = temp_Denom,\n            Percentage = round(100*temp_Num/temp_Denom,1),\n            Year= as.numeric(year_loop)\n          ) \n        \n      }\n    }\n  }\n}",
    "crumbs": [
      "Data Processing",
      "Calculate aggregated results"
    ]
  },
  {
    "objectID": "quarto/calculate_aggregated_results.html#aggregate-coverage-results-for-people-without-hiv",
    "href": "quarto/calculate_aggregated_results.html#aggregate-coverage-results-for-people-without-hiv",
    "title": "Calculate aggregated results",
    "section": "Aggregate Coverage Results for People Without HIV",
    "text": "Aggregate Coverage Results for People Without HIV\nThis final section calculates geographic coverage for the population without HIV.\nThe structure mirrors the PLWH calculation but uses:\n\ntract_noncases instead of tract_cases\nTract_total_nonHIV_cases as the denominator\n\n\nWhat Is Being Calculated?\nFor each:\n\nOrgan\n\nDistance\n\nYear\n\nthe script computes:\n\nThe numerator: total estimated non-HIV population within the united active-center catchment area\n\nThe denominator: total estimated non-HIV population across all census tracts for that year\n\nThe percentage: share of the non-HIV population within geographic reach\n\n\n\nWhy Only Active Centers?\nIn this implementation, non-HIV coverage is calculated for active transplant centers only.\nThis provides a general population access benchmark that can be compared against:\n\nCoverage for people living with HIV\n\nCoverage within HIV-performing or HOPE-performing center categories\n\n\n\nHow It Works\nFor each organ, distance, and year:\n\nThe united active-center tract object is selected.\nGeometry is dropped for efficient aggregation.\ntract_noncases is summed within the catchment area.\nThe total is divided by the national non-HIV population estimate for that year.\nA new row is appended to Results_nonHIV_df[[organ]].\n\n\nThese results allow comparison between:\n\nGeographic access for people living with HIV\n\nGeographic access for the general population\n\nChanges over time\n\nDifferences across organ types and service-area definitions\n\nTogether, the PLWH and non-HIV tables provide the quantitative foundation for the manuscript’s access comparisons.\n\n\nClick to show/hide R Code\n#Calculate tract-level results for people without HIV\nfor (organ_loop in organ_list)\n{\n  for (distance_loop in distance_list){\n    for (year_loop in year_list){\n      for (type in c(\"active\")) {\n        \n        name_of_df&lt;-paste0(\"tracts_in_buffers_\", type, \"_united\")\n        print(name_of_df)\n        \n        temp_Num&lt;-get(name_of_df)[[organ_loop]][[distance_loop]][[year_loop]]%&gt;%\n          st_drop_geometry()%&gt;%\n          group_by(catchment_area)%&gt;%\n          summarize(total_noncases=sum(tract_noncases, na.rm=TRUE))%&gt;%\n          pull(total_noncases)%&gt;%\n          first()\n        \n        temp_Denom&lt;-Tract_total_nonHIV_cases[[year_loop]]\n        \n        Results_nonHIV_df[[organ_loop]]&lt;-Results_nonHIV_df[[organ_loop]]%&gt;%\n          add_row(\n            Characteristic = paste(type, distance_loop),\n            Numerator = round(temp_Num, 0),\n            Denominator = temp_Denom,\n            Percentage = round(100*temp_Num/temp_Denom,1),\n            Year= as.numeric(year_loop))\n        \n        \n        \n      }\n    }\n  }\n  \n}",
    "crumbs": [
      "Data Processing",
      "Calculate aggregated results"
    ]
  },
  {
    "objectID": "quarto/calculate_aggregated_results.html#other-portions-of-the-analysis",
    "href": "quarto/calculate_aggregated_results.html#other-portions-of-the-analysis",
    "title": "Calculate aggregated results",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Calculate aggregated results"
    ]
  },
  {
    "objectID": "quarto/county_geographic_calculations.html",
    "href": "quarto/county_geographic_calculations.html",
    "title": "County-level geographic calculations",
    "section": "",
    "text": "The code in this script creates the cohort of kidney transplant patients eligible for the study for use in other scripts.",
    "crumbs": [
      "Data Processing",
      "County-level geographic calculations"
    ]
  },
  {
    "objectID": "quarto/county_geographic_calculations.html#preparing-transplant-center-sf-objects",
    "href": "quarto/county_geographic_calculations.html#preparing-transplant-center-sf-objects",
    "title": "County-level geographic calculations",
    "section": "Preparing transplant-center sf objects",
    "text": "Preparing transplant-center sf objects\nThis code converts multiple transplant-center datasets into geographic (sf) objects and organizes them in nested lists by organ and year. The end result is four parallel list objects that can be used downstream for buffering, distance calculations, and map overlays.\n\nWhat gets created\n\nTransplant_centers_all_sf\nSpatial (sf) version of all transplant centers, by organ.\nTransplant_centers_active_SF\nSpatial (sf) version of active transplant centers, by organ and year.\nTransplant_centers_HIV_sf\nSpatial (sf) subset of centers that performed an HIV R+ transplant at the given time point, by organ and year.\nTransplant_centers_HOPE_sf\nSpatial (sf) subset of centers that performed an HOPE (HIV D+/R+) transplant at the given time point, by organ and year.\n\n\n\nStep 1: initialize empty containers\nWe start by creating empty lists. These will be filled inside the loops:\n\nthe outer list is keyed by organ_loop (from organ_list)\nfor year-specific objects, there is an inner list keyed by year_loop (from year_list)\n\n\n\nStep 2: Loop Over Organ Types\nFor each organ in organ_list:\n\nThe dataset of all transplant centers for that organ is converted to an sf object.\nThe coordinate reference system is transformed to EPSG:5070 (NAD83 / Conus Albers).\n\nThis projection is used because it is well-suited for U.S. spatial analyses and provides consistent units for distance-based calculations.\n\n\n\nStep 3: Loop Over Years Within Each Organ\nFor each year in year_list, three organ-year–specific spatial datasets are created:\n\nA) Active Centers\nThe year-specific dataset of active transplant centers is converted to sf and projected to EPSG:5070.\n\n\nB) HIV R+ Centers\nFrom the full set of centers for that organ, centers are filtered to retain only those whose OTCCode appears in the HIV center volume file for that organ and year.\nThis identifies centers that performed at least one HIV R+ transplant at that time point.\n\n\nC) HOPE (HIV D+/R+) Centers\nSimilarly, the full center list is filtered using the HOPE center volume file to identify centers that performed HIV D+/R+ transplants during that year.\n\n\n\n\nFinal Structure\nAfter the loops complete, the resulting structure is:\n\nTransplant_centers_all_sf[[organ]]\nTransplant_centers_active_SF[[organ]][[year]]\nTransplant_centers_HIV_sf[[organ]][[year]]\nTransplant_centers_HOPE_sf[[organ]][[year]]\n\nThis consistent nested design allows downstream functions to iterate cleanly across organ types and years when generating maps, buffers, and catchment-area analyses.\n\n\nClick to show/hide R Code\nTransplant_centers_all_sf&lt;-list()\nTransplant_centers_active_SF&lt;-list()\nTransplant_centers_HIV_sf&lt;-list()\nTransplant_centers_HOPE_sf&lt;-list()\n\nfor (organ_loop in organ_list)\n  \n{\n\n  #Convert transplant center data to geographical data\n  Transplant_centers_all_sf[[organ_loop]]&lt;-Transplant_centers_all[[organ_loop]]%&gt;%\n    st_transform(5070)  \n  \n  \n  \n  for (year_loop in year_list) {\n    \n\n    Transplant_centers_active_SF[[organ_loop]][[year_loop]]&lt;-Transplant_centers_active[[organ_loop]][[year_loop]]%&gt;%\n      st_transform(5070)\n    \n\n    #Geographic file of centers that performed an HIV HIV R+ transplant at the designated time point\n    Transplant_centers_HIV_sf[[organ_loop]][[year_loop]] &lt;- Transplant_centers_all_sf[[organ_loop]]%&gt;%\n      filter(OTCCode %in% HIV_center_volumes[[organ_loop]][[year_loop]]$REC_CTR_CD)\n    \n    #Geographic file of centers that performed an HIV D+/R+ transplant at the designated time point\n    Transplant_centers_HOPE_sf[[organ_loop]][[year_loop]] &lt;- Transplant_centers_all_sf[[organ_loop]]%&gt;%\n      filter(OTCCode %in% HOPE_center_volumes[[organ_loop]][[year_loop]]$REC_CTR_CD)\n    \n    \n    \n    \n  }\n  \n  \n}",
    "crumbs": [
      "Data Processing",
      "County-level geographic calculations"
    ]
  },
  {
    "objectID": "quarto/county_geographic_calculations.html#merging-cdc-hiv-data-with-county-and-tract-geography",
    "href": "quarto/county_geographic_calculations.html#merging-cdc-hiv-data-with-county-and-tract-geography",
    "title": "County-level geographic calculations",
    "section": "Merging CDC HIV Data with County and Tract Geography",
    "text": "Merging CDC HIV Data with County and Tract Geography\nThis section joins CDC Atlas HIV surveillance data to U.S. county and census tract population files, then derives tract-level HIV estimates for downstream spatial analysis.\nThree list objects are created:\n\nMerged_Counties\nCounty-level spatial data merged with CDC HIV totals.\nMerged_Counties_nonSF\nCounty-level data with geometry removed (used for attribute joins).\nMerged_tracts\nCensus tract–level spatial data with estimated HIV-positive and HIV-negative populations.\n\nEach object is indexed by year.\n\n\nStep 1: Initialize Storage Lists\nEmpty lists are created to store year-specific merged datasets.\nEach list will ultimately contain one entry per year in year_list.\n\n\n\nStep 2: Loop Over Years\nFor each year:\n\n\n\nA) Merge County Population Data with CDC Atlas Data\nCounty geographic population files are joined with CDC Atlas HIV totals.\n\nThe join matches GEOID (county FIPS) from the population file\nTo geo_id from the CDC Atlas dataset\nA left_join() ensures that all counties remain in the dataset\n\nThe result is a spatial (sf) object containing:\n\nCounty geometry\nCounty population\nCounty HIV case counts and rates\n\nThis object is stored in:\n\n\nClick to show/hide R Code\nMerged_Counties&lt;-list()\nMerged_Counties_nonSF&lt;-list()\nMerged_tracts&lt;-list()\n\nfor (year_loop in year_list) {\n\n  #Join county geographical data with CDC data.\n  Merged_Counties[[year_loop]]&lt;-left_join(us_counties_population[[year_loop]],\n                                          AtlasPlusTableData_county_totals[[year_loop]], \n                                          by=join_by(GEOID==geo_id))\n  \n  Merged_Counties_nonSF[[year_loop]]&lt;-Merged_Counties[[year_loop]]%&gt;%\n    st_drop_geometry()\n  \n\n  \n  #Merge county data with tracts\n  Merged_tracts[[year_loop]]&lt;-left_join(us_tracts_population[[year_loop]], \n                                Merged_Counties_nonSF[[year_loop]], \n                                by=c(\"county_fips\"=\"GEOID\"))%&gt;%\n    select(-NAME.x, -NAME.y)%&gt;%\n    #Estimate census tract HIV population\n    mutate(tract_cases=county_cases*tract_population/county_population)%&gt;%\n    #Estimate HIV-negative population in census tracts\n    mutate(tract_noncases=tract_population-tract_cases)%&gt;%\n    st_transform(5070)\n  \n  \n}",
    "crumbs": [
      "Data Processing",
      "County-level geographic calculations"
    ]
  },
  {
    "objectID": "quarto/county_geographic_calculations.html#other-portions-of-the-analysis",
    "href": "quarto/county_geographic_calculations.html#other-portions-of-the-analysis",
    "title": "County-level geographic calculations",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "County-level geographic calculations"
    ]
  },
  {
    "objectID": "quarto/functions.html",
    "href": "quarto/functions.html",
    "title": "Functions",
    "section": "",
    "text": "The code in this script generates tables for the manuscript.",
    "crumbs": [
      "Data Loading & Setup",
      "Functions"
    ]
  },
  {
    "objectID": "quarto/functions.html#drawing-60-minute-isochrones-around-each-transplant-center",
    "href": "quarto/functions.html#drawing-60-minute-isochrones-around-each-transplant-center",
    "title": "Functions",
    "section": "Drawing 60 minute isochrones around each transplant center",
    "text": "Drawing 60 minute isochrones around each transplant center\nThe following function uses the mapboxapi package to calculate 60-minute travel isochrones around each transplant center.\nThe function assumes the that you have an API token configured in R. For details of how to do this, see the package documentation.\nIts inputs are as follows:\n\nSFObject: This is an object of class sf that contains the location of each transplant center\nyear: year as a character. Must be a year in yearlist defined in R/setup.R.\n\n\n\nClick to show/hide R Code\n#Define a function that takes an SF data object and returns 60 minute isochrones\nset_60_min_isochrone_at_7AM&lt;-function(SFObject, year) {\n  \n  if (nrow(SFObject) == 0) {\n    return(\n      SFObject %&gt;%\n        st_transform(5070)\n    )\n  }else{\n    tempDF&lt;-SFObject%&gt;%\n      mutate(TimeZone=tz_lookup(., method=\"accurate\"))%&gt;%\n      st_transform(4326)\n    \n    FinalDF &lt;- vector(\"list\", length(timezones))\n    \n    \n    for(i in 1:length(timezones))\n    {\n      TZ&lt;-converted_times[[year]][[i,1]]\n      \n      UTCTime&lt;-format(converted_times[[year]][[i,3]], \"%Y-%m-%dT%H:%M:%SZ\")\n      \n      if (nrow(filter(tempDF,TimeZone==TZ))&gt;0)\n      {\n        temp&lt;-tempDF%&gt;%\n          filter(TimeZone==TZ)%&gt;%\n          mb_isochrone(time = 60, \n                       profile = \"driving-traffic\",\n                       depart_at = UTCTime,\n                       id_column = \"OTCCode\")%&gt;%\n          rename(OTCCode=id)\n        FinalDF[[i]]&lt;-temp\n      }\n    }\n    \n    FinalDF%&gt;%\n      bind_rows()%&gt;%\n      st_transform(5070)%&gt;%\n      return()\n  }\n}",
    "crumbs": [
      "Data Loading & Setup",
      "Functions"
    ]
  },
  {
    "objectID": "quarto/functions.html#converting-data-frame-of-summary-results-into-a-gt-format-table",
    "href": "quarto/functions.html#converting-data-frame-of-summary-results-into-a-gt-format-table",
    "title": "Functions",
    "section": "converting data frame of summary results into a gt format table",
    "text": "converting data frame of summary results into a gt format table\nInset LLM text here\n\n\nClick to show/hide R Code\nconvert_resultsdf_to_table&lt;-function(resultsdf, \n                                     year_list_fn=year_list,\n                                     row_values,\n                                     row_labels,\n                                     table_title){\n  \n  \n  resultsdf%&gt;%\n    \n    #Reshape data set\n    pivot_wider(\n      names_from = Year,\n      values_from = c(Numerator, Denominator, Percentage),\n      names_vary = \"slowest\"\n    )%&gt;%\n    \n    #Use the table defined above to turn Characteristic into a factor variable\n    mutate(Characteristic=factor(Characteristic,\n                                 levels = row_values,\n                                 labels = row_labels))%&gt;%\n    arrange(Characteristic)%&gt;%\n    \n    #Convert to a gt format table\n    gt()%&gt;%\n    \n    #Groups columns by year with a spanner label\n    {\n      purrr::reduce(\n        year_list_fn,\n        ~ .x %&gt;%\n          tab_spanner(\n            label = .y,\n            columns = matches(paste0(\"_\", .y, \"$\"))\n          ),\n        .init = .\n      )\n    } %&gt;%\n    \n    #Sets coluns to round to 0 decimal places for numbers and 1 decimal place for percentages\n    fmt_number(\n      columns = matches(paste0(\"Numerator_|Denominator_\")),\n      decimals = 0,\n      use_seps = TRUE\n    ) %&gt;%\n    fmt_number(\n      columns = matches(\"Percentage_\"),\n      decimals = 1\n    )%&gt;%tab_header(\n      title = table_title\n    )%&gt;%\n    \n    #Removes \"_year\" from columns\n    cols_label_with(~ \"Numerator\",   columns = matches(\"^Numerator_\")) %&gt;%\n    cols_label_with(~ \"Denominator\", columns = matches(\"^Denominator_\")) %&gt;%\n    cols_label_with(~ \"Percentage\",  columns = matches(\"^Percentage_\"))%&gt;%\n    \n    #Shades columns by year for easier reading\n    \n    {\n      purrr::reduce(\n        seq_along(year_list_fn),\n        ~ .x %&gt;%\n          tab_style(\n            style = cell_fill(\n              color = colorRampPalette(c(\"lightgray\",\"lightblue\"))(\n                length(year_list_fn)\n              )[.y]            ),\n            locations = cells_body(\n              columns = matches(paste0(\"_\", year_list_fn[.y], \"$\"))\n            )\n          ),\n        .init = .\n      )\n    }%&gt;%\n    \n    #Add separators between years\n    {\n      purrr::reduce(\n        seq_len(length(year_list_fn) - 1),\n        ~ .x %&gt;%\n          tab_style(\n            style = cell_borders(\n              sides = \"right\",\n              weight = px(2),\n              color = \"black\"\n            ),\n            locations = cells_body(\n              columns = matches(paste0(\"Percentage_\", year_list_fn[.y], \"$\"))\n            )\n          ) %&gt;%\n          tab_style(\n            style = cell_borders(\n              sides = \"left\",\n              weight = px(2),\n              color = \"black\"\n            ),\n            locations = cells_body(\n              columns = matches(paste0(\"Numerator_\", year_list_fn[.y + 1], \"$\"))\n            )\n          ),\n        .init = .\n      )\n    }\n  \n  \n}\n\n\n}",
    "crumbs": [
      "Data Loading & Setup",
      "Functions"
    ]
  },
  {
    "objectID": "quarto/functions.html#creates-paired-plots-of-maps-with-percentages-in-the-plot",
    "href": "quarto/functions.html#creates-paired-plots-of-maps-with-percentages-in-the-plot",
    "title": "Functions",
    "section": "Creates paired plots of maps with percentages in the plot",
    "text": "Creates paired plots of maps with percentages in the plot\nLLM text\n\n\nClick to show/hide R Code\nmake_paired_plot&lt;-function(organ,\n                           distance,\n                           outcome,\n                           buffer_list,\n                           year1=\"2017\",\n                           year2=\"2022\",\n                           plottitle,\n                           include_nonHIV=FALSE)\n{\n  \n  # ----Error checking----\n  \n  # Validate include_nonHIV\n  if (!is.logical(include_nonHIV) || length(include_nonHIV) != 1 || is.na(include_nonHIV)) {\n    stop(\"include_nonHIV must be a single TRUE or FALSE value.\")\n  }\n  \n  \n  #Access name of object passed to `buffer_list`\n  buffer_name &lt;- deparse(substitute(buffer_list))\n  \n  #Make sure name of outcome matches buffer_list\n  if (!stringr::str_detect(\n    stringr::str_to_lower(buffer_name),\n    stringr::str_to_lower(outcome)\n  )) {\n    warning(glue::glue(\n      \"Buffer object ('{buffer_name}') may not match outcome '{outcome}'.\"\n    ))\n  }\n  \n  if (!year1 %in% year_list) {\n    stop(glue::glue(\"year1 ({year1}) is not in year_list.\"))\n  }\n  \n  if (!year2 %in% year_list) {\n    stop(glue::glue(\"year2 ({year2}) is not in year_list.\"))\n  }\n  \n  if (!outcome %in% c(\"active\", \"HIV\", \"HOPE\")) {\n    stop(glue::glue(\"outcome ({outcome}) is not in c('active', 'HIV', 'HOPE').\"))\n  }\n  \n  # ----Main function----\n  \n  #Keep only elements of Results_HIV_df necessary for plot\n  summary_df_HIV&lt;-Results_HIV_df[[organ]]%&gt;%\n    filter(str_detect(Characteristic, outcome))%&gt;%\n    filter(str_detect(Characteristic, distance))\n  \n  #parameters of plot assigned\n  parameter_plot&lt;-list()\n  parameter_plot$y_title&lt;-0.9\n  parameter_plot$y_footnote&lt;-0.1\n  \n  if (include_nonHIV)\n  {\n    parameter_plot$y_title&lt;-0.97\n    parameter_plot$y_footnote&lt;-0.01\n  }\n  \n  \n  #Keep only elements of Results_nonHIV_df necessary for plot, if even needed in the first place\n  if (include_nonHIV)\n  {\n    summary_df_nonHIV&lt;-Results_nonHIV_df[[organ]]%&gt;%\n      filter(str_detect(Characteristic, outcome))%&gt;%\n      filter(str_detect(Characteristic, distance))\n  }\n  \n  #Creates text for nonHIV (is NULL if )\n  title_text_nonHIV&lt;-list()\n  \n  if (include_nonHIV==TRUE) {\n    title_text_nonHIV[[year1]]&lt;-\n      glue(\"&lt;br&gt;\",\n           \"&lt;span style='font-size:30pt; font-weight:normal;'&gt;HIV negative:&lt;/span&gt; \",\n           \"&lt;span style='font-size:30pt; font-weight:bold;'&gt;\",\n           \"{summary_df_nonHIV$Percentage[summary_df_nonHIV$Year == as.numeric(year1)]}%\",\n           \"&lt;/span&gt;\",\n           \"&lt;br&gt;\",\n           \"{comma(summary_df_nonHIV$Numerator[summary_df_nonHIV$Year == as.numeric(year1)])}\",\n           \" / \",\n           \"{comma(summary_df_nonHIV$Denominator[summary_df_nonHIV$Year == as.numeric(year1)])}\")\n    \n    title_text_nonHIV[[year2]]&lt;-\n      glue(\"&lt;br&gt;\",\n           \"&lt;span style='font-size:30pt; font-weight:normal;'&gt;HIV negative:&lt;/span&gt; \",\n           \"&lt;span style='font-size:30pt; font-weight:bold;'&gt;\",\n           \"{summary_df_nonHIV$Percentage[summary_df_nonHIV$Year == as.numeric(year2)]}%\",\n           \"&lt;/span&gt;\",\n           \"&lt;br&gt;\",\n           \"{comma(summary_df_nonHIV$Numerator[summary_df_nonHIV$Year == as.numeric(year2)])}\",\n           \" / \",\n           \"{comma(summary_df_nonHIV$Denominator[summary_df_nonHIV$Year == as.numeric(year2)])}\")\n  }\n  else {\n    title_text_nonHIV[[year1]]&lt;-\"\"\n    title_text_nonHIV[[year2]]&lt;-\"\"\n  }\n  \n  \n  \n  #Left graph\n  Plot1&lt;-ggplot() +\n    geom_sf(data = county_dots_transformed[[year1]], size = 0.3, color = \"navy\", alpha = 0.5) +\n    theme_void() +\n    theme(\n      axis.title.y = element_text(size = 36, angle = 90, vjust = 0.5),\n      plot.title = element_textbox(size = 16, hjust = 0.5,\n                                   halign = 0.5)\n    )+\n    labs(y=year1,\n         title = glue(\"&lt;span style='font-size:30pt; font-weight:normal;'&gt;PLWH:&lt;/span&gt; \",\n                      \"&lt;span style='font-size:30pt; font-weight:bold;'&gt;\",\n                      \"{summary_df_HIV$Percentage[summary_df_HIV$Year == as.numeric(year1)]}%\",\n                      \"&lt;/span&gt;\",\n                      \"&lt;br&gt;\",\n                      \"{comma(summary_df_HIV$Numerator[summary_df_HIV$Year == as.numeric(year1)])}\",\n                      \" / \",\n                      \"{comma(summary_df_HIV$Denominator[summary_df_HIV$Year == as.numeric(year1)])}\",\n                      title_text_nonHIV[[year1]]\n         ))+\n    geom_sf(data=buffer_list[[organ]][[distance]][[year1]], color=\"red\", fill=NA)+\n    geom_sf(data=states_sf_transformed, fill=NA)\n  \n  \n  #Right plot\n  Plot2&lt;-ggplot() +\n    geom_sf(data = county_dots_transformed[[year2]], size = 0.3, color = \"navy\", alpha = 0.5) +\n    theme_void() +\n    theme(\n      axis.title.y = element_text(size = 36, angle = 90, vjust = 0.5),\n      plot.title = element_textbox(size = 16, hjust = 0.5,\n                                   halign = 0.5)\n    )+\n    labs(y=year2,\n         title = glue(\"&lt;span style='font-size:30pt; font-weight:normal;'&gt;PLWH:&lt;/span&gt; \",\n                      \"&lt;span style='font-size:30pt; font-weight:bold;'&gt;\",\n                      \"{summary_df_HIV$Percentage[summary_df_HIV$Year == as.numeric(year2)]}%\",\n                      \"&lt;/span&gt;\",\n                      \"&lt;br&gt;\",\n                      \"{comma(summary_df_HIV$Numerator[summary_df_HIV$Year == as.numeric(year2)])}\",\n                      \" / \",\n                      \"{comma(summary_df_HIV$Denominator[summary_df_HIV$Year == as.numeric(year2)])}\",\n                      title_text_nonHIV[[year2]]\n         ))+\n    geom_sf(data=buffer_list[[organ]][[distance]][[year2]], color=\"red\", fill=NA)+\n    geom_sf(data=states_sf_transformed, fill=NA)\n  \n  #Combine plots\n  combined&lt;-cowplot::plot_grid(Plot1, Plot2,\n                               ncol = 2, align = \"hv\")\n  \n  final_plot &lt;- ggdraw() +\n    draw_plot(combined) +\n    draw_label(\n      plottitle,\n      x = 0.5, y = parameter_plot$y_title,   # top center\n      hjust = 0.5, vjust = 1,   # anchor to the top edge\n      fontface = 'bold',\n      size = 25\n    )+\n    # \n    draw_label(\n      \"Each blue dot represents 100 people with HIV\\nRed outlines represent the catchment area for each transplant center\",\n      x = 0.02, y = parameter_plot$y_footnote,          # left margin position\n      hjust = 0, vjust = 0,        # align text to the left edge\n      size = 14,\n      fontface = \"italic\"\n    )\n  \n  return(final_plot)\n  \n}",
    "crumbs": [
      "Data Loading & Setup",
      "Functions"
    ]
  },
  {
    "objectID": "quarto/functions.html#plot-the-number-of-people-with-hiv-in-the-catchment-area-of-each-transplant-center",
    "href": "quarto/functions.html#plot-the-number-of-people-with-hiv-in-the-catchment-area-of-each-transplant-center",
    "title": "Functions",
    "section": "Plot the number of people with HIV in the catchment area of each transplant center",
    "text": "Plot the number of people with HIV in the catchment area of each transplant center\nThis function uses the ggbeeswarm package to make GraphPad Prism-type plots comparing the number of people living with HIV in the catchment area of each transplant center in the years specified.\n\n\nClick to show/hide R Code\nplot_center_HIV_catchment&lt;-function(organ,\n                                    distance,\n                                    buffer_list,\n                                    year1=\"2017\",\n                                    year2=\"2022\"){\n  \n  \n  \n  # ----Error checking----\n  \n  #Access name of object passed to `buffer_list`\n  buffer_name &lt;- deparse(substitute(buffer_list))\n  \n  if (!year1 %in% year_list) {\n    stop(glue::glue(\"year1 ({year1}) is not in year_list.\"))\n  }\n  \n  if (!year2 %in% year_list) {\n    stop(glue::glue(\"year2 ({year2}) is not in year_list.\"))\n  }\n  \n  \n  \n  temp_DF&lt;-list()\n  \n  temp_DF[[year1]]&lt;-buffer_list%&gt;%\n    pluck(year1)%&gt;%\n    st_drop_geometry()%&gt;%\n    group_by(OTCCode)%&gt;%\n    summarize(total_cases=round(sum(tract_cases), 0))%&gt;%\n    mutate(year=as.numeric(year1))%&gt;%\n    mutate(Center_classification=case_when(\n      OTCCode %in% HOPE_center_volumes[[organ]][[year1]]$REC_CTR_CD~\"HOPE center\",\n      OTCCode %in% HIV__center_volumes[[organ]][[year1]]$REC_CTR_CD~\"≥1 HIV R+ transplants\",\n      OTCCode %in% Active_tx_centers[[organ]][[year1]]~\"No HIV R+ transplants\"\n    ))%&gt;%\n    filter(!is.na(OTCCode))\n  \n  \n  temp_DF[[year2]]&lt;-buffer_list%&gt;%\n    pluck(year2)%&gt;%\n    st_drop_geometry()%&gt;%\n    group_by(OTCCode)%&gt;%\n    summarize(total_cases=round(sum(tract_cases), 0))%&gt;%\n    mutate(year=as.numeric(year2))%&gt;%\n    mutate(Center_classification=case_when(\n      OTCCode %in% HOPE_center_volumes[[organ]][[year2]]$REC_CTR_CD~\"HOPE center\",\n      OTCCode %in% HIV__center_volumes[[organ]][[year2]]$REC_CTR_CD~\"≥1 HIV R+ transplants\",\n      OTCCode %in% Active_tx_centers[[organ]][[year2]]~\"No HIV R+ transplants\"\n    ))%&gt;%\n    filter(!is.na(OTCCode))\n  \n  combined_DF&lt;-bind_rows(temp_DF)%&gt;%\n    mutate(Center_classification=factor(Center_classification,\n                                        levels=c(\"HOPE center\",\"≥1 HIV R+ transplants\", \"No HIV R+ transplants\"),\n                                        labels=c(\"HOPE center\",\"≥1 HIV R+ transplants\", \"No HIV R+ transplants\")\n    ))%&gt;%\n    mutate(Center_classification_color=case_when(\n      OTCCode %in% HOPE_center_volumes[[organ]][[year1]]$REC_CTR_CD~\"HOPE center\",\n      OTCCode %in% HIV__center_volumes[[organ]][[year1]]$REC_CTR_CD~\"≥1 HIV R+ transplants\",\n      OTCCode %in% Active_tx_centers[[organ]][[year1]]~\"No HIV R+ transplants\",\n      TRUE~glue(\"No transplants in {year1}\")\n    ))\n  \n  combined_DF %&gt;% ggplot()+\n    geom_violin(mapping = aes(x=Center_classification, y=total_cases), color = NA, alpha=0.5,fill = \"grey\", \n                draw_quantiles = 1)+\n    stat_summary(mapping = aes(x=Center_classification, y=total_cases),fun = median, \n                 fun.min = median, fun.max = median, \n                 geom = \"crossbar\", width = 0.9, fatten=1.5)+\n    geom_quasirandom(mapping = aes(x=Center_classification, y=total_cases, color=Center_classification_color), \n                     cex=2, alpha=0.7)+\n    stat_compare_means(method = \"kruskal.test\",\n                       mapping = aes(x = Center_classification, y = total_cases)) +\n    scale_y_continuous(labels = scales::comma)+\n    guides(color = guide_legend(title.position = \"top\", nrow = 1))+\n    theme_classic()+\n    theme(legend.position = \"bottom\",\n          legend.title = element_text(hjust = 0.5),  # centers title\n          legend.box = \"horizontal\")+\n    theme(axis.text.x = element_text(\n      angle = 45,\n      hjust = 1,\n      vjust = 1))+\n    facet_grid(.~year)+\n    labs(x = \"Center HIV R+ volume\", y=\"PLWH in catchment area\", color=glue(\"{year1} status\"))+\n    scale_color_discrete(breaks = c(\"HOPE center\",\n                                    \"≥1 HIV R+ transplants\", \n                                    \"No HIV R+ transplants\",\n                                    glue(\"No transplants in {year1}\"))\n    )\n  \n  \n  \n}",
    "crumbs": [
      "Data Loading & Setup",
      "Functions"
    ]
  },
  {
    "objectID": "quarto/functions.html#other-portions-of-the-analysis",
    "href": "quarto/functions.html#other-portions-of-the-analysis",
    "title": "Functions",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Loading & Setup",
      "Functions"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_buffers.html",
    "href": "quarto/join_tracts_to_buffers.html",
    "title": "Join tracts to buffers",
    "section": "",
    "text": "This section identifies which census tracts fall within transplant center catchment areas.\nEarlier steps created:\nHere, we determine which tracts intersect each center’s catchment area using spatial joins.",
    "crumbs": [
      "Data Processing",
      "Join tracts to buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_buffers.html#linking-census-tracts-to-transplant-center-catchment-areas",
    "href": "quarto/join_tracts_to_buffers.html#linking-census-tracts-to-transplant-center-catchment-areas",
    "title": "Join tracts to buffers",
    "section": "Linking Census Tracts to Transplant Center Catchment Areas",
    "text": "Linking Census Tracts to Transplant Center Catchment Areas\nThis code performs spatial intersection joins between:\n\nCensus tract–level data (Merged_tracts)\nTransplant center buffer polygons\n\nThe goal is to determine which tracts are geographically reachable from transplant centers under each scenario.",
    "crumbs": [
      "Data Processing",
      "Join tracts to buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_buffers.html#objects-created",
    "href": "quarto/join_tracts_to_buffers.html#objects-created",
    "title": "Join tracts to buffers",
    "section": "Objects Created",
    "text": "Objects Created\nThree nested list objects are generated:\n\ntracts_in_buffers_active\ntracts_in_buffers_HIV\ntracts_in_buffers_HOPE\n\nEach is indexed by:\n\nOrgan\n\nDistance\n\nYear",
    "crumbs": [
      "Data Processing",
      "Join tracts to buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_buffers.html#what-the-spatial-join-does",
    "href": "quarto/join_tracts_to_buffers.html#what-the-spatial-join-does",
    "title": "Join tracts to buffers",
    "section": "What the Spatial Join Does",
    "text": "What the Spatial Join Does\nFor each:\n\nOrgan\n\nDistance\n\nYear\n\nThe script performs:\nst_join(…, join = st_intersects)\nThis means:\n\nA census tract is included if its geometry intersects the transplant center buffer polygon.\n\nIn practical terms:\n\nIf any part of a tract lies within a center’s catchment area,\nThat tract is considered geographically accessible to that center.",
    "crumbs": [
      "Data Processing",
      "Join tracts to buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_buffers.html#important-note-on-duplication",
    "href": "quarto/join_tracts_to_buffers.html#important-note-on-duplication",
    "title": "Join tracts to buffers",
    "section": "Important Note on Duplication",
    "text": "Important Note on Duplication\nBecause this join is performed against individual center buffers, a tract can appear multiple times if:\n\nIt falls within the catchment area of more than one transplant center.\n\nThis duplication is intentional at this stage because:\n\nIt preserves center-level relationships.\nIt allows downstream analyses of overlap and multi-center accessibility.\n\nLater steps that use united buffers eliminate this duplication when calculating total population coverage.",
    "crumbs": [
      "Data Processing",
      "Join tracts to buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_buffers.html#why-this-step-matters",
    "href": "quarto/join_tracts_to_buffers.html#why-this-step-matters",
    "title": "Join tracts to buffers",
    "section": "Why This Step Matters",
    "text": "Why This Step Matters\nThis spatial join enables calculation of:\n\nNumber of people living with HIV within reach of transplant centers\nDifferences in geographic access between:\n\nActive centers\nHIV R+ centers\nHOPE centers\n\nChanges over time (e.g., 2017 vs 2022)\n\nBy linking tract-level population data to center catchment areas, the analysis translates geography into measurable access.\n\n\n\nClick to show/hide R Code\n#ST join to individual tracts and transplant centers\n\n\ntracts_in_buffers_active&lt;-list()\ntracts_in_buffers_HIV&lt;-list()\ntracts_in_buffers_HOPE&lt;-list()\n\n\n\n\nfor (organ_loop in organ_list){\n  for (distance_loop in distance_list){\n    for (year_loop in year_list){\n\n      message(paste(\"Currently on:\", organ_loop, \"\", distance_loop, \"for year:\", year_loop))\n      message(\"Calculating tracts for active...\")\n      \n      #This leads to duplication of tracts if they fall in more than one transplant center's catchment area)      \n      tracts_in_buffers_active[[organ_loop]][[distance_loop]][[year_loop]] &lt;- \n        st_join(Merged_tracts[[year_loop]], \n                Transplant_centers_active_buffer[[organ_loop]][[distance_loop]][[year_loop]], \n                join = st_intersects)\n      \n      \n      message(\"Calculating tracts for HIV...\")\n      \n      tracts_in_buffers_HIV[[organ_loop]][[distance_loop]][[year_loop]] &lt;- \n        st_join(Merged_tracts[[year_loop]], \n                Transplant_centers_HIV_buffer[[organ_loop]][[distance_loop]][[year_loop]], \n                join = st_intersects)\n      \n      message(\"Calculating tracts for HOPE...\")\n      \n      tracts_in_buffers_HOPE[[organ_loop]][[distance_loop]][[year_loop]] &lt;- \n        st_join(Merged_tracts[[year_loop]], \n                Transplant_centers_HOPE_buffer[[organ_loop]][[distance_loop]][[year_loop]], \n                join = st_intersects)\n\n      \n            \n    }\n  }\n}",
    "crumbs": [
      "Data Processing",
      "Join tracts to buffers"
    ]
  },
  {
    "objectID": "quarto/join_tracts_to_buffers.html#other-portions-of-the-analysis",
    "href": "quarto/join_tracts_to_buffers.html#other-portions-of-the-analysis",
    "title": "Join tracts to buffers",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Join tracts to buffers"
    ]
  },
  {
    "objectID": "quarto/load_data.html",
    "href": "quarto/load_data.html",
    "title": "Load data",
    "section": "",
    "text": "The code in this script loads the data needed for other scripts from multiple sources, as explained in detail below.",
    "crumbs": [
      "Data Processing",
      "Load data"
    ]
  },
  {
    "objectID": "quarto/load_data.html#load-us-state-maps-from-census",
    "href": "quarto/load_data.html#load-us-state-maps-from-census",
    "title": "Load data",
    "section": "Load US state maps from census",
    "text": "Load US state maps from census\nWe import U.S. state boundary shapefiles using the tigris package.\nThe tigris::states() function retrieves state-level shapefiles from the U.S. Census Bureau’s TIGER/Line products.\n\nColumn Selection\nWe retain only:\n\nNAME → full state name\nSTUSPS → two-letter state abbreviation\ngeometry → polygon boundaries\n\nThis reduces memory overhead and keeps the object lightweight for downstream joins and plotting.\n\n\nExclusions\nWe remove:\n\nAlaska and Hawaii (to avoid projection distortion in contiguous U.S. maps)\nU.S. territories (not included in SRTR transplant center analyses)\n\nThis ensures that visualizations align with the contiguous U.S. study population.\n\n\nOutput\nThe resulting object, states_sf, is an sf object containing polygon geometries for the 48 contiguous U.S. states,\n\n\nClick to show/hide R Code\nstates_sf &lt;- tigris::states(cb = TRUE, year = 2022)%&gt;%\n  select(NAME, STUSPS, geometry) %&gt;%\n  filter(!(NAME %in% c(\"Alaska\", \n                       \"Hawaii\", \n                       \"Puerto Rico\", \n                       \"United States Virgin Islands\",\n                       \"Commonwealth of the Northern Mariana Islands\",\n                       \"Guam\",\n                       \"American Samoa\"))) %&gt;%\n  rename(State=NAME)",
    "crumbs": [
      "Data Processing",
      "Load data"
    ]
  },
  {
    "objectID": "quarto/load_data.html#import-transplant-data-from-unos-srtr",
    "href": "quarto/load_data.html#import-transplant-data-from-unos-srtr",
    "title": "Load data",
    "section": "Import transplant data from UNOS SRTR",
    "text": "Import transplant data from UNOS SRTR\nTo identify active transplant centers and characterize transplant activity by organ type, we import transplant recipient-level and donor-level data from the Scientific Registry of Transplant Recipients (SRTR).\nThese datasets are accessed using a custom helper function, load_srtr_file(), which standardizes file loading, variable labeling, and preprocessing across SRTR tables.\n\n\nClick to show/hide R Code\ntx&lt;-list()\n\ntx[[\"kidney\"]] &lt;- load_srtr_file(\"tx_ki\")\ntx[[\"liver\"]] &lt;- load_srtr_file(\"tx_li\")\ntx[[\"heart\"]] &lt;- load_srtr_file(\"tx_hr\")\ntx[[\"lung\"]] &lt;- load_srtr_file(\"tx_lu\")\ntx[[\"pancreas\"]] &lt;- load_srtr_file(\"tx_kp\")\n\n\n\ndonor_deceased &lt;- load_srtr_file(\"donor_deceased\")%&gt;%\n  select(DONOR_ID, DON_ANTI_HIV, DON_HIV_NAT)",
    "crumbs": [
      "Data Processing",
      "Load data"
    ]
  },
  {
    "objectID": "quarto/load_data.html#load-transplant-center-data-from-srtr-package",
    "href": "quarto/load_data.html#load-transplant-center-data-from-srtr-package",
    "title": "Load data",
    "section": "Load transplant center data from SRTR package",
    "text": "Load transplant center data from SRTR package\nTo map transplant center locations and define geographic catchment areas, we retrieve center-level data from the Health Resources and Services Administration (HRSA) using the sRtr package.\nThe get_hrsa_transplant_centers() function accesses HRSA transplant center metadata, including center identifiers and geographic coordinates.\nSubsequent steps:\n\nRemove Hawaii and Puerto Rico\nKeep the following variables:\n\nOTC_NM: transplant center name\nOTC_CD: transplant center 4-letter UNOS code\nService_Lst: list of organs transplanted at that center\nX, Y: longitude and latitude of transplant center\n\nKeep transplant centers whose organ corresponds with the organ defined in the organ_loop variable for each loop\nRemoves duplicates with the distinct() command\nRenames variables for convenience\nPauses for five seconds between iterations to avoid overloading the HRSA website\n\n\n\nClick to show/hide R Code\nTransplant_centers_all&lt;-list()\n\nfor (organ_loop in organ_list)\n{\n  \n  \n  Transplant_centers_all[[organ_loop]]&lt;-sRtr::get_hrsa_transplant_centers()%&gt;%\n    filter(OPO_STATE_ABBR != \"PR\" & OPO_STATE_ABBR!= \"HI\")%&gt;%\n    select(OTC_NM, OTC_CD, Service_Lst, X, Y) %&gt;%\n    filter(str_detect(Service_Lst, str_to_sentence(organ_loop)))%&gt;%\n    select(-Service_Lst)%&gt;%\n    distinct()%&gt;%\n    rename(OTCName=OTC_NM, OTCCode=OTC_CD, Latitude=Y, Longitude=X)\n  Sys.sleep(5)\n  \n}",
    "crumbs": [
      "Data Processing",
      "Load data"
    ]
  },
  {
    "objectID": "quarto/load_data.html#load-census-data",
    "href": "quarto/load_data.html#load-census-data",
    "title": "Load data",
    "section": "Load census data",
    "text": "Load census data\nTo estimate catchment populations for transplant centers, we retrieve tract- and county-level population data from the American Community Survey (ACS) 5-year files. Because these data are large and slow to download, we implement a caching strategy to avoid repeated API calls during iterative renders.\n\nOverview\nFor each year in year_list, this code:\n\nRetrieves tract-level total population\nRetrieves county-level total population\nCaches results locally as .rds files\n\nThis structure ensures reproducibility while dramatically improving performance during Quarto re-rendering.\n\n\nTract-Level Population Data\nWe obtain tract-level total population using ACS variable:\n\nB01003_001 — Total population\n\nIf a cached file already exists (cache/us_tracts_population_YEAR.rds), it is loaded directly. Otherwise:\n\nData are downloaded using get_acs()\nGeometry is included (geometry = TRUE) for spatial joins\nCounty FIPS codes are derived from the first five digits of the tract GEOID\nIdentifier fields are converted to numeric for efficient joins\nOnly necessary variables are retained\nThe cleaned dataset is saved locally for future use\n\n\nWhy include geometry?\nIncluding tract geometry allows direct spatial intersection with:\n\n50-mile buffers\n60-minute isochrones\nUnited catchment areas\n\nThis avoids needing a second shapefile join later.\n\n\n\nCounty-Level Population Data\nCounty-level total population is retrieved using the same ACS variable (B01003_001), with geometry retained.\nCounty data are used for:\n\nCounty-level HIV prevalence overlays\nAggregated catchment summaries\nValidation checks against tract-level totals\n\nAs with tract data, results are cached locally to prevent redundant API calls.\n\n\nAge and Sex Variable Labels (B01001)\nThe ACS table B01001 contains detailed age- and sex-specific population counts. Rather than downloading these counts directly in this step, we load the variable metadata using:\n\n\nClick to show/hide R Code\nus_tracts_population&lt;-list()\nus_counties_population&lt;-list()\nvars&lt;-list()\n\nfor (year_loop in year_list){\n  \n  \n  tracts_path&lt;-paste0(\"cache/us_tracts_population_\",year_loop,\".rds\")\n  counties_path&lt;-paste0(\"cache/us_counties_population_\",year_loop,\".rds\")\n  \n  #Pull US Census tract populations if cache file doesn't already exist\n  \n  if (file.exists(tracts_path)) {\n    us_tracts_population[[year_loop]] &lt;- readRDS(tracts_path)\n  } else {\n    \n    us_tracts_population[[year_loop]]&lt;-get_acs(\n      geography = \"tract\",\n      variables = \"B01003_001\",\n      year = as.numeric(year_loop),\n      survey = \"acs5\",\n      geometry = TRUE,\n      state = continental_fips\n    )%&gt;%\n      mutate(county_fips = substr(GEOID, 1, 5))%&gt;%\n      mutate(GEOID=as.numeric(GEOID))%&gt;%\n      mutate(county_fips=as.numeric(county_fips))%&gt;%\n      select(-variable, -moe)%&gt;%\n      rename(tract_population=estimate)\n    \n    saveRDS(us_tracts_population[[year_loop]], \n            tracts_path)\n    \n  }\n  \n  #Pull US Census counties populations if cache file doesn't already exist\n  \n  if (file.exists(counties_path)) {\n    us_counties_population[[year_loop]] &lt;- readRDS(counties_path)\n  } else {\n    \n    us_counties_population[[year_loop]]&lt;-get_acs(\n      geography = \"county\",\n      variables = \"B01003_001\",\n      year = as.numeric(year_loop),\n      survey = \"acs5\",\n      geometry = TRUE,\n      state = continental_fips\n    )%&gt;%\n      mutate(GEOID=as.numeric(GEOID))%&gt;%\n      select(-variable, -moe)%&gt;%\n      rename(county_population=estimate)\n    \n    saveRDS(us_counties_population[[year_loop]], \n            counties_path)\n    \n    \n  }\n  \n  # Load tract variable labels for age/sex values B01001 from the ACS 5-year 2017 dataset\n  vars[[year_loop]] &lt;- load_variables(year_loop, \"acs5\", cache = TRUE) %&gt;%\n    filter(str_detect(name, \"B01001_\"))%&gt;%\n    mutate(label = str_replace_all(label, \"Estimate!!Total!!\", \"\"))%&gt;%\n    mutate(label = str_replace_all(label, \"!!\", \"_\"))%&gt;%\n    mutate(label = str_replace_all(label, \" \", \"_\"))\n  \n}",
    "crumbs": [
      "Data Processing",
      "Load data"
    ]
  },
  {
    "objectID": "quarto/load_data.html#atlasplus-county-level-hiv-data",
    "href": "quarto/load_data.html#atlasplus-county-level-hiv-data",
    "title": "Load data",
    "section": "AtlasPlus county-level HIV data",
    "text": "AtlasPlus county-level HIV data\nThis code uses the CDCAtlas package to download county-level HIV prevalence data for the years defined in year_list.\n\n\nClick to show/hide R Code\nAtlasPlusTableData_county_totals&lt;-list()\n\nfor (year_loop in year_list){\n  \n  AtlasPlusTableData_county_totals[[year_loop]] &lt;-CDCAtlas::get_atlas(disease=\"hiv\",\n                                                                      geography=\"county\",\n                                                                      year=as.numeric(year_loop))%&gt;%\n    clean_names()%&gt;%\n    rename(county_cases=cases)%&gt;%\n    rename(geo_id=fips)%&gt;%\n    rename(county_name=geography)%&gt;%\n    mutate(county_cases=if_else(is.na(county_cases),0, county_cases))%&gt;%\n    mutate(geo_id=as.numeric(geo_id))%&gt;%\n    filter(year==as.numeric(year_loop))%&gt;%\n    select(-year)%&gt;%\n    filter(indicator==\"HIV prevalence\")\n  \n}",
    "crumbs": [
      "Data Processing",
      "Load data"
    ]
  },
  {
    "objectID": "quarto/load_data.html#other-portions-of-the-analysis",
    "href": "quarto/load_data.html#other-portions-of-the-analysis",
    "title": "Load data",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Processing",
      "Load data"
    ]
  },
  {
    "objectID": "quarto/results_kidney.html",
    "href": "quarto/results_kidney.html",
    "title": "Results: kidney",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive kidney center 50 mile radius\n829,420\n943,972\n87.9\n922,009\n1,062,528\n86.8\n\n\nActive HIV R+ kidney center 50 mile radius\n743,327\n943,972\n78.7\n897,794\n1,062,528\n84.5\n\n\nActive HOPE D+ kidney center 50 mile radius\n251,407\n943,972\n26.6\n542,728\n1,062,528\n51.1\n\n\nActive kidney center 60 min radius\n810,118\n943,972\n85.8\n900,207\n1,062,528\n84.7\n\n\nActive HIV R+ kidney center 60 min radius\n716,562\n943,972\n75.9\n871,997\n1,062,528\n82.1\n\n\nActive HOPE D+ kidney center 60 min radius\n213,736\n943,972\n22.6\n516,115\n1,062,528\n48.6\n\n\nActive kidney center 100 mile radius\n916,045\n943,972\n97.0\n1,027,648\n1,062,528\n96.7\n\n\nActive HIV R+ kidney center 100 mile radius\n859,185\n943,972\n91.0\n1,009,720\n1,062,528\n95.0\n\n\nActive HOPE D+ kidney center 100 mile radius\n310,133\n943,972\n32.9\n685,557\n1,062,528\n64.5\n\n\nActive kidney center 200 mile radius\n940,586\n943,972\n99.6\n1,058,151\n1,062,528\n99.6\n\n\nActive HIV R+ kidney center 200 mile radius\n932,194\n943,972\n98.8\n1,053,072\n1,062,528\n99.1\n\n\nActive HOPE D+ kidney center 200 mile radius\n389,399\n943,972\n41.3\n863,351\n1,062,528\n81.3\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive kidney center 50 mile radius\n246,425,478\n317,900,212\n77.5\n251,899,239\n327,849,655\n76.8\n\n\nActive kidney center 60 min radius\n234,289,463\n317,900,212\n73.7\n239,610,458\n327,849,655\n73.1\n\n\nActive kidney center 100 mile radius\n295,848,702\n317,900,212\n93.1\n304,680,817\n327,849,655\n92.9\n\n\nActive kidney center 200 mile radius\n313,568,234\n317,900,212\n98.6\n323,271,155\n327,849,655\n98.6",
    "crumbs": [
      "Results, separated by organ",
      "Kidney"
    ]
  },
  {
    "objectID": "quarto/results_kidney.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "href": "quarto/results_kidney.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "title": "Results: kidney",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive kidney center 50 mile radius\n829,420\n943,972\n87.9\n922,009\n1,062,528\n86.8\n\n\nActive HIV R+ kidney center 50 mile radius\n743,327\n943,972\n78.7\n897,794\n1,062,528\n84.5\n\n\nActive HOPE D+ kidney center 50 mile radius\n251,407\n943,972\n26.6\n542,728\n1,062,528\n51.1\n\n\nActive kidney center 60 min radius\n810,118\n943,972\n85.8\n900,207\n1,062,528\n84.7\n\n\nActive HIV R+ kidney center 60 min radius\n716,562\n943,972\n75.9\n871,997\n1,062,528\n82.1\n\n\nActive HOPE D+ kidney center 60 min radius\n213,736\n943,972\n22.6\n516,115\n1,062,528\n48.6\n\n\nActive kidney center 100 mile radius\n916,045\n943,972\n97.0\n1,027,648\n1,062,528\n96.7\n\n\nActive HIV R+ kidney center 100 mile radius\n859,185\n943,972\n91.0\n1,009,720\n1,062,528\n95.0\n\n\nActive HOPE D+ kidney center 100 mile radius\n310,133\n943,972\n32.9\n685,557\n1,062,528\n64.5\n\n\nActive kidney center 200 mile radius\n940,586\n943,972\n99.6\n1,058,151\n1,062,528\n99.6\n\n\nActive HIV R+ kidney center 200 mile radius\n932,194\n943,972\n98.8\n1,053,072\n1,062,528\n99.1\n\n\nActive HOPE D+ kidney center 200 mile radius\n389,399\n943,972\n41.3\n863,351\n1,062,528\n81.3\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive kidney center 50 mile radius\n246,425,478\n317,900,212\n77.5\n251,899,239\n327,849,655\n76.8\n\n\nActive kidney center 60 min radius\n234,289,463\n317,900,212\n73.7\n239,610,458\n327,849,655\n73.1\n\n\nActive kidney center 100 mile radius\n295,848,702\n317,900,212\n93.1\n304,680,817\n327,849,655\n92.9\n\n\nActive kidney center 200 mile radius\n313,568,234\n317,900,212\n98.6\n323,271,155\n327,849,655\n98.6",
    "crumbs": [
      "Results, separated by organ",
      "Kidney"
    ]
  },
  {
    "objectID": "quarto/results_kidney.html#figures",
    "href": "quarto/results_kidney.html#figures",
    "title": "Results: kidney",
    "section": "Figures",
    "text": "Figures\nFigures are grouped into three sections.\n\n\nCompare PLWH and non-HIV\nThese figures compare geographic access between PLWH and individuals without HIV within each catchment definition.\nEach panel corresponds to a distance-based definition:\n\n50 miles\n\n60 minutes\n\n100 miles\n\n200 miles\n\nThese figures highlight disparities in access by HIV status.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCompare PLWH Between Years\nThese figures evaluate changes in geographic access among PLWH between 2017 and 2022.\nFor each catchment definition, results are shown for:\n\nActive centers\n\nHIV R+ centers\n\nHOPE Act D+ centers\n\nThis section highlights temporal changes in transplant center availability.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBeeswarm Plots\nBeeswarm plots display the distribution of catchment-level population proportions across centers.\nEach point represents a transplant center, with the distribution shown for each distance definition.\nThese plots illustrate variability in geographic access across centers rather than only aggregate proportions.",
    "crumbs": [
      "Results, separated by organ",
      "Kidney"
    ]
  },
  {
    "objectID": "quarto/results_lung.html",
    "href": "quarto/results_lung.html",
    "title": "Results: lung",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive lung center 50 mile radius\n687,760\n943,972\n72.9\n755,291\n1,062,528\n71.1\n\n\nActive HIV R+ lung center 50 mile radius\n224,995\n943,972\n23.8\n496,378\n1,062,528\n46.7\n\n\nActive HOPE D+ lung center 50 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive lung center 60 min radius\n661,712\n943,972\n70.1\n724,678\n1,062,528\n68.2\n\n\nActive HIV R+ lung center 60 min radius\n216,602\n943,972\n22.9\n472,089\n1,062,528\n44.4\n\n\nActive HOPE D+ lung center 60 min radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive lung center 100 mile radius\n803,324\n943,972\n85.1\n899,219\n1,062,528\n84.6\n\n\nActive HIV R+ lung center 100 mile radius\n268,761\n943,972\n28.5\n642,032\n1,062,528\n60.4\n\n\nActive HOPE D+ lung center 100 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive lung center 200 mile radius\n911,686\n943,972\n96.6\n1,024,082\n1,062,528\n96.4\n\n\nActive HIV R+ lung center 200 mile radius\n470,934\n943,972\n49.9\n878,460\n1,062,528\n82.7\n\n\nActive HOPE D+ lung center 200 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive lung center 50 mile radius\n181,100,239\n317,900,212\n57.0\n187,021,525\n327,849,655\n57.0\n\n\nActive lung center 60 min radius\n166,197,517\n317,900,212\n52.3\n171,620,447\n327,849,655\n52.3\n\n\nActive lung center 100 mile radius\n242,944,675\n317,900,212\n76.4\n250,661,797\n327,849,655\n76.5\n\n\nActive lung center 200 mile radius\n298,567,105\n317,900,212\n93.9\n307,731,863\n327,849,655\n93.9",
    "crumbs": [
      "Results, separated by organ",
      "Lung"
    ]
  },
  {
    "objectID": "quarto/results_lung.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "href": "quarto/results_lung.html#table-1-and-table-2-summary-results-in-plwh-and-without-hiv",
    "title": "Results: lung",
    "section": "",
    "text": "This table summarizes the number and proportion of people living with HIV who reside within defined catchment areas of:\n\nActive transplant centers\n\nHIV R+ transplant centers\n\nHOPE Act D+ centers\n\nCatchment areas are defined by:\n\n50-mile radius\n\n60-minute driving time\n\n100-mile radius\n\n200-mile radius\n\nResults are shown for 2017 and 2022.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in PLWH\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive lung center 50 mile radius\n687,760\n943,972\n72.9\n755,291\n1,062,528\n71.1\n\n\nActive HIV R+ lung center 50 mile radius\n224,995\n943,972\n23.8\n496,378\n1,062,528\n46.7\n\n\nActive HOPE D+ lung center 50 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive lung center 60 min radius\n661,712\n943,972\n70.1\n724,678\n1,062,528\n68.2\n\n\nActive HIV R+ lung center 60 min radius\n216,602\n943,972\n22.9\n472,089\n1,062,528\n44.4\n\n\nActive HOPE D+ lung center 60 min radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive lung center 100 mile radius\n803,324\n943,972\n85.1\n899,219\n1,062,528\n84.6\n\n\nActive HIV R+ lung center 100 mile radius\n268,761\n943,972\n28.5\n642,032\n1,062,528\n60.4\n\n\nActive HOPE D+ lung center 100 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\nActive lung center 200 mile radius\n911,686\n943,972\n96.6\n1,024,082\n1,062,528\n96.4\n\n\nActive HIV R+ lung center 200 mile radius\n470,934\n943,972\n49.9\n878,460\n1,062,528\n82.7\n\n\nActive HOPE D+ lung center 200 mile radius\n943,972\n943,972\n100.0\n1,062,528\n1,062,528\n100.0\n\n\n\n\n\n\n\n\n\n\nThis table presents the same catchment analysis for individuals without HIV.\nIt allows direct comparison of geographic access between:\n\nPLWH\n\nIndividuals without HIV\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nAccess to transplant in people without HIV\n\n\nCharacteristic\n\n2017\n\n\n2022\n\n\n\nNumerator\nDenominator\nPercentage\nNumerator\nDenominator\nPercentage\n\n\n\n\nActive lung center 50 mile radius\n181,100,239\n317,900,212\n57.0\n187,021,525\n327,849,655\n57.0\n\n\nActive lung center 60 min radius\n166,197,517\n317,900,212\n52.3\n171,620,447\n327,849,655\n52.3\n\n\nActive lung center 100 mile radius\n242,944,675\n317,900,212\n76.4\n250,661,797\n327,849,655\n76.5\n\n\nActive lung center 200 mile radius\n298,567,105\n317,900,212\n93.9\n307,731,863\n327,849,655\n93.9",
    "crumbs": [
      "Results, separated by organ",
      "Lung"
    ]
  },
  {
    "objectID": "quarto/results_lung.html#figures",
    "href": "quarto/results_lung.html#figures",
    "title": "Results: lung",
    "section": "Figures",
    "text": "Figures\nFigures are grouped into three sections.\n\n\nCompare PLWH and non-HIV\nThese figures compare geographic access between PLWH and individuals without HIV within each catchment definition.\nEach panel corresponds to a distance-based definition:\n\n50 miles\n\n60 minutes\n\n100 miles\n\n200 miles\n\nThese figures highlight disparities in access by HIV status.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCompare PLWH Between Years\nThese figures evaluate changes in geographic access among PLWH between 2017 and 2022.\nFor each catchment definition, results are shown for:\n\nActive centers\n\nHIV R+ centers\n\nHOPE Act D+ centers\n\nThis section highlights temporal changes in transplant center availability.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nBeeswarm Plots\nBeeswarm plots display the distribution of catchment-level population proportions across centers.\nEach point represents a transplant center, with the distribution shown for each distance definition.\nThese plots illustrate variability in geographic access across centers rather than only aggregate proportions.",
    "crumbs": [
      "Results, separated by organ",
      "Lung"
    ]
  },
  {
    "objectID": "quarto/setup.html",
    "href": "quarto/setup.html",
    "title": "Setup",
    "section": "",
    "text": "The code in this script imports libraries, initializes constants, and performs other such preparatory work for the main analysis.",
    "crumbs": [
      "Data Loading & Setup",
      "Setup"
    ]
  },
  {
    "objectID": "quarto/setup.html#libraries",
    "href": "quarto/setup.html#libraries",
    "title": "Setup",
    "section": "Libraries",
    "text": "Libraries\nThe analysis relies on a set of open-source R packages for data management, cohort construction, visualization, and statistical modeling. These libraries were selected based on their stability, community support, and suitability for large-scale longitudinal health data.\n\n\nClick to show/hide R Code\n# Libraries necessary for the analysis\n\n# Data management\nlibrary(tidyverse)\nlibrary(stringi)\nlibrary(glue)\n\n#Core library for the SRTR\nlibrary(sRtr)\n\n#Data import libraries\nlibrary(readxl)\nlibrary(readr)\nlibrary(haven)\nlibrary(mapboxapi)\nlibrary(CDCAtlas)\n\n#Geographic libraries\nlibrary(sf)\nlibrary(tigris)\nlibrary(tidycensus)\nlibrary(tmap)\nlibrary(lutz)\n\n#Table libraries\nlibrary(flextable)\nlibrary(gt)\n\n#Plotting\nlibrary(colorspace)\nlibrary(ggtext)\nlibrary(extrafont)\nlibrary(janitor)\nlibrary(ggrepel)\nlibrary(writexl)\nlibrary(plotly)\nlibrary(htmlwidgets)\nlibrary(patchwork)\nlibrary(ggbeeswarm)\nlibrary(ggpubr)\nlibrary(cowplot)\nlibrary(scales)\n\n\nThe table below lists the required packages along with links to their primary documentation.\n\n\n\n\n\n\n\n\nRequired R Packages\n\n\nLibraries used for data processing, visualization, and statistical modeling\n\n\nCategory\nR package\nDocumentation\n\n\n\n\nData management\ntidyverse\ntidyverse\n\n\nData management\nstringi\nstringi\n\n\nData management\nglue\nglue\n\n\nSRTR-specific\nsRtr\nsRtr GitHub\n\n\nData import\nreadxl\nreadxl\n\n\nData import\nreadr\nreadr\n\n\nData import\nhaven\nhaven\n\n\nData import\nmapboxapi\nmapboxapi\n\n\nData import\nCDCAtlas\nCDCAtlas GitHub\n\n\nGeographic\nsf\nsf\n\n\nGeographic\ntigris\ntigris\n\n\nGeographic\ntidycensus\ntidycensus\n\n\nGeographic\ntmap\ntmap\n\n\nGeographic\nlutz\nlutz\n\n\nTables\nflextable\nflextable\n\n\nTables\ngt\ngt\n\n\nPlotting\ncolorspace\ncolorspace\n\n\nPlotting\nggtext\nggtext\n\n\nPlotting\nextrafont\nextrafont\n\n\nPlotting\njanitor\njanitor\n\n\nPlotting\nggrepel\nggrepel\n\n\nPlotting\nwritexl\nwritexl\n\n\nPlotting\nplotly\nplotly\n\n\nPlotting\nhtmlwidgets\nhtmlwidgets\n\n\nPlotting\npatchwork\npatchwork\n\n\nPlotting\nggbeeswarm\nggbeeswarm\n\n\nPlotting\nggpubr\nggpubr\n\n\nPlotting\ncowplot\ncowplot\n\n\nPlotting\nscales\nscales",
    "crumbs": [
      "Data Loading & Setup",
      "Setup"
    ]
  },
  {
    "objectID": "quarto/setup.html#constants",
    "href": "quarto/setup.html#constants",
    "title": "Setup",
    "section": "Constants",
    "text": "Constants\nA number of analysis parameters are reused across cohort construction, matching, and cost modeling steps.\nThese constants are defined in the R/setup.R file.\n\n\nClick to show/hide R Code\norgan_list&lt;-c(\"liver\", \"kidney\", \"heart\", \"lung\", \"pancreas\")\nyear_list&lt;-c(\"2017\", \"2022\")\ndistance_list=c(\"50mile\", \"60min\", \"100mile\", \"200mile\")\n\n#List states which are continental\ncontinental_fips &lt;- c(\n  \"01\", \"04\", \"05\", \"06\", \"08\", \"09\", \"10\", \"11\", \"12\", \"13\", \"16\",\n  \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\",\n  \"27\", \"28\", \"29\", \"30\", \"31\", \"32\", \"33\", \"34\", \"35\", \"36\",\n  \"37\", \"38\", \"39\", \"40\", \"41\", \"42\", \"44\", \"45\", \"46\", \"47\",\n  \"48\", \"49\", \"50\", \"51\", \"53\", \"54\", \"55\", \"56\"\n)\n\n#For isochrone analysis, we need to account for time zones in order to calculate driving time at 7 AM on the specific date\n\n#List US continental time zones\n\ntimezones&lt;-c(\"America/New_York\",\"America/Chicago\",\"America/Denver\",\"America/Los_Angeles\",\"America/Phoenix\",\n             \"America/Indiana/Indianapolis\",\"America/Kentucky/Louisville\",\"America/Detroit\")\n\nreference_date&lt;-list()\n\n# Specific date to anchor the time: First Monday in March of both years\nreference_date[[\"2022\"]] &lt;- as.Date(\"2022-03-07\")\nreference_date[[\"2017\"]] &lt;- as.Date(\"2017-03-06\")\n\n\nFor clarity, these constants are summarized below along with brief explanations of their role in the analysis.\n\n\n\n\n\n\n\n\nAnalysis Constants\n\n\nGeographic buffer definitions and time-zone parameters\n\n\nConstant\nValue\nExplanation\n\n\n\n\norgan_list\nliver, kidney, heart, lung, pancreas\nOrgans included in transplant center access analysis\n\n\nyear_list\n2017, 2022\nCalendar years evaluated for geographic access comparison\n\n\ndistance_list\n50mile, 60min, 100mile, 200mile\nDistance or drive-time buffers used to define transplant center catchment areas\n\n\ncontinental_fips\n01, 04, 05, 06, 08, 09, 10, 11, 12, 13, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 44, 45, 46, 47, 48, 49, 50, 51, 53, 54, 55, 56\nFIPS codes representing continental U.S. states included in analysis\n\n\ntimezones\nAmerica/New_York, America/Chicago, America/Denver, America/Los_Angeles, America/Phoenix, America/Indiana/Indianapolis, America/Kentucky/Louisville, America/Detroit\nTime zones used to convert local 7 AM departure times to UTC for isochrone calculations\n\n\nreference_date\n2022: 2022-03-07 | 2017: 2017-03-06\nAnchor dates (first Monday in March) used for time-zone–adjusted isochrone generation",
    "crumbs": [
      "Data Loading & Setup",
      "Setup"
    ]
  },
  {
    "objectID": "quarto/setup.html#other-portions-of-the-analysis",
    "href": "quarto/setup.html#other-portions-of-the-analysis",
    "title": "Setup",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nTables: Summary tables and regression outputs generated from the final models.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Data Loading & Setup",
      "Setup"
    ]
  },
  {
    "objectID": "quarto/tables.html",
    "href": "quarto/tables.html",
    "title": "Tables",
    "section": "",
    "text": "This section formats the aggregated results into publication-ready tables using the gt package.\nEarlier steps produced:\n\nResults_HIV_df — coverage results for people living with HIV (PLWH)\nResults_nonHIV_df — coverage results for people without HIV\n\nHere, those summary data frames are transformed into formatted tables and exported for manuscript use.\n\n\n\n\n\n\n\nSource code\n\n\n\nThe full R script is available at:\n\nR/tables.R\n\nThis R script file is itself reliant on the following helper files:\n\nR/setup.R\nR/functions.R",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#table-1-and-table-2-generating-manuscript-ready-tables",
    "href": "quarto/tables.html#table-1-and-table-2-generating-manuscript-ready-tables",
    "title": "Tables",
    "section": "",
    "text": "This section formats the aggregated results into publication-ready tables using the gt package.\nEarlier steps produced:\n\nResults_HIV_df — coverage results for people living with HIV (PLWH)\nResults_nonHIV_df — coverage results for people without HIV\n\nHere, those summary data frames are transformed into formatted tables and exported for manuscript use.\n\n\n\n\n\n\n\nSource code\n\n\n\nThe full R script is available at:\n\nR/tables.R\n\nThis R script file is itself reliant on the following helper files:\n\nR/setup.R\nR/functions.R",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#what-this-section-does",
    "href": "quarto/tables.html#what-this-section-does",
    "title": "Tables",
    "section": "What This Section Does",
    "text": "What This Section Does\nFor each organ:\n\nConstructs descriptive row labels (e.g., “Active kidney center, 60 min radius”).\nConverts the results data frame into a formatted gt table.\nSaves the tables as:\n\n.docx (for manuscript editing)\n.png (for quick sharing or embedding)\n\nCaches the final gt objects as .rds files for reuse in Quarto.",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#step-1-define-output-file-paths",
    "href": "quarto/tables.html#step-1-define-output-file-paths",
    "title": "Tables",
    "section": "Step 1: Define Output File Paths",
    "text": "Step 1: Define Output File Paths\nFor each organ, file paths are dynamically generated for:\n\nTable 1 (PLWH results)\nTable 2 (Non-HIV population results)\n\nEach table is saved in both:\n\nWord format (.docx)\nImage format (.png)\n\nExisting .docx files are removed first to avoid overwrite conflicts.",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#step-2-create-descriptive-row-labels",
    "href": "quarto/tables.html#step-2-create-descriptive-row-labels",
    "title": "Tables",
    "section": "Step 2: Create Descriptive Row Labels",
    "text": "Step 2: Create Descriptive Row Labels\nThe script builds a lookup table (table_factor_values) that:\n\nCombines center type (active, HIV, HOPE)\nCombines distance definitions (e.g., 50mile, 60min)\nConverts internal codes into human-readable labels\n\nExamples:\n\nactive 60min → “Active kidney center 60 min radius”\nHIV 50mile → “Active HIV R+ kidney center 50 mile radius”\n\nThis ensures consistent, manuscript-friendly labeling.",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#step-3-convert-results-to-gt-tables",
    "href": "quarto/tables.html#step-3-convert-results-to-gt-tables",
    "title": "Tables",
    "section": "Step 3: Convert Results to gt Tables",
    "text": "Step 3: Convert Results to gt Tables\nThe helper function convert_resultsdf_to_table():\n\nOrders rows consistently\nFormats percentages\nApplies table titles\nStructures the output by year\n\nTwo tables are created per organ:\n\nTable 1: Access to transplant in PLWH\n\nTable 2: Access to transplant in people without HIV",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#step-4-export-and-cache",
    "href": "quarto/tables.html#step-4-export-and-cache",
    "title": "Tables",
    "section": "Step 4: Export and Cache",
    "text": "Step 4: Export and Cache\nEach table is:\n\nSaved as .docx (for manuscript submission workflows)\nSaved as .png (for presentations or embedding)\nStored as an .rds object in the cache/ directory\n\nCaching the gt objects allows Quarto pages to load the formatted tables directly without regenerating them.",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#why-this-matters",
    "href": "quarto/tables.html#why-this-matters",
    "title": "Tables",
    "section": "Why This Matters",
    "text": "Why This Matters\nThis step translates analytic outputs into:\n\nClean, interpretable manuscript tables\nReproducible formatted results\nFiles ready for journal submission\n\nIt represents the final transformation from geographic modeling to publication-ready evidence.\n\n\nClick to show/hide R Code\n#Tables\n\n\n# Initialize lists of gt objects\nResults_HIV_gt&lt;-list()\nResults_nonHIV_gt&lt;-list()\n\n#Create tables as docx and PNG\n\nfor (organ_loop in organ_list)\n{\n  \n  #Initialize file_path\n  file_path&lt;-list()\n  file_path[[\"Table 1\"]][[\".docx\"]]&lt;-paste0(\"tables/\", organ_loop,\"/\",organ_loop, \" analysis results Table 1.docx\")\n  file_path[[\"Table 2\"]][[\".docx\"]]&lt;-paste0(\"tables/\", organ_loop,\"/\",organ_loop, \" analysis results Table 2.docx\")\n  file_path[[\"Table 1\"]][[\".png\"]]&lt;-paste0(\"tables/\", organ_loop,\"/\",organ_loop, \" analysis results Table 1.png\")\n  file_path[[\"Table 2\"]][[\".png\"]]&lt;-paste0(\"tables/\", organ_loop,\"/\",organ_loop, \" analysis results Table 2.png\")\n  \n  #Define table with labels based on values in distance_list and types of outcomes\n  \n  table_factor_values&lt;-expand.grid(\n    Type = c(\"active\", \"HIV\", \"HOPE\"),\n    Distance = distance_list,\n    stringsAsFactors = FALSE)%&gt;%\n    mutate(value=paste(Type, Distance))%&gt;%\n    mutate(\n      label = paste(\n        recode(Type,\n               active = paste(\"Active\", organ_loop, \"center\"),\n               HIV    = paste(\"Active HIV R+\", organ_loop, \"center\"),\n               HOPE   = paste(\"Active HOPE D+\", organ_loop, \"center\")\n        ),\n        case_when(\n          stringr::str_detect(Distance, \"mile$\") ~ \n            stringr::str_replace(Distance, \"mile$\", \" mile radius\"),\n          stringr::str_detect(Distance, \"min$\")  ~ \n            stringr::str_replace(Distance, \"min$\", \" min radius\"),\n          TRUE ~ Distance\n        )\n      )\n    )\n  \n  #Remove .docx files if they exist\n  if (file.exists(file_path[[\"Table 1\"]][[\".docx\"]])) {\n    file.remove(file_path[[\"Table 1\"]][[\".docx\"]])\n  }\n  \n  if (file.exists(file_path[[\"Table 2\"]][[\".docx\"]])) {\n    file.remove(file_path[[\"Table 2\"]][[\".docx\"]])\n  }\n  \n  #Create tables and save results as .docx and PNG\n  Results_HIV_gt[[organ_loop]]&lt;-Results_HIV_df[[organ_loop]]%&gt;%\n    convert_resultsdf_to_table(year_list_fn=year_list,\n                               row_values = table_factor_values$value,\n                               row_labels = table_factor_values$label,\n                               table_title= \"Access to transplant in PLWH\")\n  gtsave(Results_HIV_gt[[organ_loop]], file_path[[\"Table 1\"]][[\".docx\"]])\n  gtsave(Results_HIV_gt[[organ_loop]], file_path[[\"Table 1\"]][[\".png\"]])\n  \n  Results_nonHIV_gt[[organ_loop]]&lt;-Results_nonHIV_df[[organ_loop]]%&gt;%\n    convert_resultsdf_to_table(year_list_fn=year_list,\n                               row_values = table_factor_values$value,\n                               row_labels = table_factor_values$label,\n                               table_title= \"Access to transplant in people without HIV\")\n  gtsave(Results_nonHIV_gt[[organ_loop]], file_path[[\"Table 2\"]][[\".docx\"]])\n  gtsave(Results_nonHIV_gt[[organ_loop]], file_path[[\"Table 2\"]][[\".png\"]])\n  \n  \n  \n}\n\n#Save table objects as .RDS so they can be accessed by Quarto\nsaveRDS(Results_HIV_gt, \"cache/Results_HIV_gt.rds\")\nsaveRDS(Results_nonHIV_gt, \"cache/Results_nonHIV_gt.rds\")",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  },
  {
    "objectID": "quarto/tables.html#other-portions-of-the-analysis",
    "href": "quarto/tables.html#other-portions-of-the-analysis",
    "title": "Tables",
    "section": "Other portions of the analysis",
    "text": "Other portions of the analysis\n\nSetup: Defines global paths, data sources, cohort inclusion criteria, and analysis-wide constants.\nFunctions: Reusable helper functions for cohort construction, matching, costing, and modeling.\nFigures:Visualizations of costs, risks, and model-based estimates.\nAbout: methods, assumptions, and disclosures",
    "crumbs": [
      "Code to create tables and figures",
      "Tables"
    ]
  }
]